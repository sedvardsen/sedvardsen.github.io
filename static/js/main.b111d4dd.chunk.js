(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},159:function(e,t,n){},264:function(e,t,n){},37:function(e){e.exports={apiBase:"https://store.galapate.com",redirect:"http://galapate.com"}},400:function(e,t,n){e.exports=n(822)},822:function(e,t,n){"use strict";n.r(t);var r=n(107),a=n(29),o=n(30),c=n(33),i=n(31),s=n(32),l=n(87),u=n(11),p=n.n(u),d=n(46),h=n(0),g=n.n(h);var f,m,v={tenant:"common",clientId:"9f256bb0-1a93-4247-9e1e-bbd05532e2ce",endpoints:{api:"9f256bb0-1a93-4247-9e1e-bbd05532e2ce"},cacheLocation:"localStorage",popUp:!0},b=(new r.AuthenticationContext(v),n(405),n(407),n(264),n(85)),O=n.n(b),y=n(41),E=n(22),k=n(181),j=n(843),x=Object(j.a)("user/info"),w=Object(j.a)("user/infoFail"),C=Object(j.a)("user/infoSuccess"),S=Object(j.a)("user/loginType"),T=Object(j.a)("sec/reset"),A=Object(j.a)("sec/signOut"),P=Object(j.a)("global/errors"),U=Object(j.a)("global/errorsClear"),I=Object(j.a)("user/getOrgs"),z=Object(j.a)("user/enableOrg"),R=Object(j.a)("user/enableOrgOk"),G=Object(j.a)("user/setOrgs"),K=Object(j.a)("user/selectOrg"),L=Object(j.a)("user/setOrgsFailed"),N=Object(j.a)("org/saveApp"),B=Object(j.a)("org/saveAppOk"),F=(Object(j.a)("org/saveAppFailed"),Object(j.a)("org/getApps")),V=Object(j.a)("org/getAppsOk"),D=Object(j.a)("org/getAppsFailed"),M=Object(j.a)("app/setProperty"),W=Object(j.a)("app/setOrgProperty"),Y=n(387),H=n(27),J=n(36),$=n(837),_=Object($.a)((f={},Object(H.a)(f,S,function(e,t){return Object(J.a)({},e,{loginType:t.payload,loginFailed:!1})}),Object(H.a)(f,C,function(e,t){return Object(J.a)({},e,{loggedIn:!0,user:t.payload,loginFailed:!1})}),Object(H.a)(f,w,function(e,t){return Object(J.a)({},e,{loggedIn:!1,user:null,loginFailed:!0})}),Object(H.a)(f,T,function(e,t){return Object(J.a)({},e,{loginType:"",loggedIn:!1,user:null})}),f),{loggedIn:!1,loginType:null,user:null,token:null}),q=function(e){return e.sec},Q=function(e){return q(e).loginType},X=function(e){return q(e).user},Z=n(361),ee=n(43),te=n.n(ee),ne=n(355),re=n.n(ne),ae={apps:null,appPage:{org:null,apps:null}},oe=Object($.a)((m={},Object(H.a)(m,C,function(e,t){return Object(J.a)({},e,{user:t.payload})}),Object(H.a)(m,w,function(e,t){return Object(J.a)({},e,{user:null,userOrgs:[]})}),Object(H.a)(m,T,function(e,t){return Object(J.a)({},e,{user:null,userOrgs:[]})}),Object(H.a)(m,P,function(e,t){return Object(J.a)({},e,{errors:Object(Z.a)(e.errors).concat([t.payload])})}),Object(H.a)(m,U,function(e,t){return Object(J.a)({},e,{errors:[]})}),Object(H.a)(m,I,function(e,t){return Object(J.a)({},e,{gettingUserOrgs:!0})}),Object(H.a)(m,G,function(e,t){var n=Object(J.a)({},e,{gettingUserOrgs:!1,userOrgs:t.payload,selectedOrg:e.user?re.a.find(t.payload,function(t){return e.user.organizationKey===t.key}):null});return n.selectedOrg&&(n[n.selectedOrg.key]=e[n.selectedOrg.key]||Object(J.a)({},ae)),n}),Object(H.a)(m,K,function(e,t){return Object(J.a)({},e,Object(H.a)({selectedOrg:t.payload},t.payload.key,e[t.payload.key]||Object(J.a)({},ae)))}),Object(H.a)(m,z,function(e,t){return te()(e,he(["enablingOrg",!0]))}),Object(H.a)(m,R,function(e,t){var n=re.a.findIndex(e.userOrgs,function(e){return e.id===t.payload.id}),r=he(["userOrgs",n,"enabled",!0],["selectedOrg","enabled",!0],["userOrgs",n,"name",t.payload.name],["selectedOrg","uriKey",t.payload.uriKey],["enablingOrg",!1]);return te()(e,r)}),Object(H.a)(m,L,function(e,t){return Object(J.a)({},e,{gettingUserOrgs:!1,userOrgs:[],selectedOrg:null})}),Object(H.a)(m,F,function(e,t){return Object(J.a)({},e,{gettingApp:!0})}),Object(H.a)(m,V,function(e,t){var n=he([ce(e),"apps",t.payload.apps],["gettingApp",!1]);return te()(e,n)}),Object(H.a)(m,D,function(e,t){return Object(J.a)({},e,{gettingApp:!1})}),Object(H.a)(m,B,function(e,t){var n=re.a.findIndex(e.apps,function(e){return e.id===t.payload.id});if(n>=0){var r=he([ce(e),"apps",n,t.payload]);return te()(e,r)}var a=he([ce(e),"apps",[t.payload].concat(Object(Z.a)(e.apps))]);return te()(e,a)}),Object(H.a)(m,M,function(e,t){return te()(e,t.payload)}),Object(H.a)(m,W,function(e,t){return te()(e,Object(H.a)({},ce(e),t.payload))}),m),{test:"",errors:[],gettingUserOrgs:!1,userOrgs:[],selectedOrg:null,enablingOrg:!1,apps:null,orgAuthPolicy:null}),ce=function(e){return e.selectedOrg?e.selectedOrg.key:"unknownOrg"},ie=function(e){return e.app},se=function(e){return e.app.selectedOrg&&e.app[e.app.selectedOrg.key]||{}},le=function(e){return ie(e).userOrgs},ue=function(e){return ie(e).enablingOrg},pe=function(e){return ie(e).selectedOrg},de=function(e){return se(e).apps},he=function(){for(var e={},t=0;t<arguments.length;t++)for(var n=t<0||arguments.length<=t?void 0:arguments[t],r=e,a=null,o=0;o<n.length;o++){if(o===n.length-2){r[n[o]]={$set:n[o+1]};break}a=r[n[o]]||{},r[n[o]]=a,r=a}return e},ge=function(){for(var e={},t=0;t<arguments.length;t++)for(var n=t<0||arguments.length<=t?void 0:arguments[t],r=e,a=null,o=0;o<n.length;o++){if(o===n.length-2){r[n[o]]={$push:[n[o+1]]};break}a=r[n[o]]||{},r[n[o]]=a,r=a}return e},fe=function(){for(var e={},t=0;t<arguments.length;t++)for(var n=t<0||arguments.length<=t?void 0:arguments[t],r=e,a=null,o=0;o<n.length;o++){if(o===n.length-2){r[n[o]]={$splice:[[n[o+1],1]]};break}a=r[n[o]]||{},r[n[o]]=a,r=a}return e},me=n(37),ve=function(e){var t=e+"=",n=document.cookie.split(";");console.log("cookies: ",n);for(var r=0;r<n.length;r++){for(var a=n[r];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null},be=function(){var e=Object(d.a)(p.a.mark(function e(t,n,r){var a,o,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a="",n=n||[],me.scheme&&n.push({key:me.scheme,value:""}),n.length>0&&(a="?"),o=!0,c=0;c<n.length;c++)null!==n[c].value&&(c>0&&!o&&(a+="&"),o=!1,a+=n[c].key+"="+encodeURIComponent(n[c].value));return e.abrupt("return",fetch("".concat(me.apiBase).concat(t).concat(a),{method:"GET",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json; charset=utf-8",token:ve("sign")}}).then(function(e){if(401===e.status)return{error:"NOAUTH"};var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")?200!==e.status?e.json().then(function(e){return e.error?e:{error:e}}):e.json():e.text().then(function(t){return{error:e.status+": "+(t||e.statusText)}})}).then(function(e){return e}).catch(function(e){return{error:e}}));case 7:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(d.a)(p.a.mark(function e(t,n){var r,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=n||[],me.scheme&&n.push({key:me.scheme,value:""}),r=new FormData,n.length>0)for(a=0;a<n.length;a++)null!==n[a].value&&r.append(n[a].key,n[a].value);return e.abrupt("return",fetch("".concat(me.apiBase).concat(t),{method:"POST",credentials:"include",headers:{token:ve("sign")},body:r}).then(function(e){if(401===e.status)return{error:"NOAUTH"};var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")?200!==e.status?e.json().then(function(e){return e.error?e:{error:e}}):e.json():e.text().then(function(t){return{error:e.status+": "+(t||e.statusText)}})}).then(function(e){return e}).catch(function(e){return{error:e}}));case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),ye=function(e,t){return fetch(me.apiBase+e,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json; charset=utf-8",token:ve("sign")},body:t?JSON.stringify(t):null}).then(function(e){if(401===e.status)return{error:"NOAUTH"};var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")?200!==e.status?e.json().then(function(e){return e.error?e:{error:e}}):e.json():e.text().then(function(t){return{error:e.status+": "+(t||e.statusText)}})}).then(function(e){return e}).catch(function(e){return{error:e}})},Ee=function(e){return be("/api/v0/user/info",e)},ke=function(e){return be("/api/v0/user/organizations",e)},je=function(e){return ye("/api/v0/organization/register/"+e.id+"?orgName="+encodeURIComponent(e.name))},xe=function(e,t){return ye("/api/v0/organization/".concat(e,"/app"),t)},we=function(e){return be("/api/v0/organization/".concat(e,"/apps"))},Ce=function(e){return be("/api/v0/organization/".concat(e,"/policy"))},Se=function(e,t){return ye("/api/v0/organization/".concat(e,"/group"),t)},Te=function(e,t){return ye("/api/v0/organization/".concat(e,"/group/delete/").concat(t.id))},Ae=function(e,t,n,r,a){return be("/api/v0/organization/".concat(e,"/users?take=").concat(r,"&skip=").concat(a,"&groupId=").concat(t,"&filter=").concat(encodeURIComponent(n||"")))},Pe=function(){return be("/account/signout",null)},Ue=(n(426),n(64)),Ie=n(831),ze=n(842),Re=n(840),Ge=n(838),Ke=(h.Component,function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={},n.handleContextRef=function(e){return n.setState({contextRef:e})},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUpdate",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this,t=this.state.contextRef;return g.a.createElement(Ie.a,{context:t},g.a.createElement(ze.a,{columns:1},g.a.createElement(ze.a.Column,{width:16},g.a.createElement(Re.a,{pointing:!0,secondary:!0,stackable:!0,style:{backgroundColor:"white",paddingLeft:"16px"}},g.a.createElement(Re.a.Item,null,g.a.createElement(E.Link,{className:"brand",to:"/"},g.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},g.a.createElement("g",null,g.a.createElement("title",null,"background"),g.a.createElement("rect",{fill:"#fff",id:"canvas_background",height:"258",width:"258",y:"-1",x:"-1"}),g.a.createElement("g",{display:"none",overflow:"visible",y:"0",x:"0",height:"100%",width:"100%",id:"canvasGrid"},g.a.createElement("rect",{fill:"url(#gridpattern)","stroke-width":"0",y:"0",x:"0",height:"100%",width:"100%"}))),g.a.createElement("g",null,g.a.createElement("title",null,"Layer 1"),g.a.createElement("path",{id:"svg_1",d:"m36.215318,186.424673l187.331697,0.07062l-6.078957,8.871002l-175.102011,-0.211852l-6.150737,-8.72977l0.000008,0zm1.287364,-118.004435l184.828484,-0.211852l5.363929,9.100292l-195.627945,0.07062l5.435532,-8.959061zm-18.240314,59.130432l221.165978,-0.211852l-0.285883,9.1003l-220.737057,-0.141232l-0.143038,-8.747217zm221.349059,0.844047c0,60.246119 -49.646813,109.256949 -110.681021,109.256949c-61.00784,0 -110.6454,-49.019689 -110.6454,-109.256949c0,-60.237554 49.646532,-109.248376 110.6454,-109.248376c61.034217,-0.00885 110.681021,49.010822 110.681021,109.248376zm-110.672331,-118.004443c-65.877825,0 -119.486531,52.931836 -119.486531,117.995569c0,65.0726 53.608714,118.004428 119.486531,118.004428c65.913695,0 119.513454,-52.931828 119.513454,-118.004428c0,-65.063734 -53.599751,-117.995569 -119.513454,-117.995569zm33.531273,118.004443c0,64.377993 -17.664889,109.256949 -33.531273,109.256949c-15.848434,0 -33.513042,-44.878956 -33.513042,-109.256949c0,-64.395717 17.655901,-109.248376 33.513042,-109.248376c15.857429,-0.00885 33.531273,44.852659 33.531273,109.248376zm-33.531273,-118.004443c-27.520862,0 -42.372116,60.799874 -42.372116,117.995569c0,57.213158 14.851254,118.004428 42.372116,118.004428c27.521143,0 42.399311,-60.800112 42.399311,-118.004428c-0.008971,-57.195695 -14.878168,-117.995569 -42.399311,-117.995569zm78.530084,118.004443c0,60.246119 -35.240633,109.256949 -78.530084,109.256949c-43.280456,0 -78.503162,-49.019689 -78.503162,-109.256949c0,-60.237554 35.222706,-109.248376 78.503162,-109.248376c43.289451,-0.00885 78.530084,49.010822 78.530084,109.248376zm-78.530084,-118.004443c-48.159693,0 -87.362228,52.931836 -87.362228,117.995569c0,65.0726 39.202535,118.004428 87.362228,118.004428c48.177636,0 87.371472,-52.931828 87.371472,-118.004428c0,-65.063734 -39.193836,-117.995569 -87.371472,-117.995569z",stroke:"#000",fill:"#00acfc"}))),"Not Appstore")),g.a.createElement(Re.a.Item,{as:E.NavLink,to:"/",exact:!0,content:"Home"}),g.a.createElement(Re.a.Item,{as:E.NavLink,to:"/pricing",content:"Pricing"}),g.a.createElement(Re.a.Item,{as:E.NavLink,to:"/about",content:"About the service"}),this.props.user&&null!==this.props.selectedOrg?[g.a.createElement(Ge.a,{className:"right",item:!0,icon:"users",text:this.props.selectedOrg.name},g.a.createElement(Ge.a.Menu,null,g.a.createElement(Ge.a.Header,null,"Organizations"),this.props.userOrgs.map(function(t){return g.a.createElement(Re.a.Item,{onClick:function(){return e.props.selectOrg(t)}},t.name)}))),g.a.createElement(Ge.a,{item:!0,icon:"setting",text:this.props.user.name},g.a.createElement(Ge.a.Menu,null,g.a.createElement(Ge.a.Header,null,"Account options"),g.a.createElement(Ge.a.Item,null,"Sign out")))]:null))))}}]),t}(h.Component)),Le=Object(E.withRouter)(Object(y.b)(function(e){return{user:X(e),loggedIn:function(e){return q(e).loggedIn}(e),userOrgs:le(e),selectedOrg:pe(e)}},function(e){return{signOut:function(t){return e(A())},setProperty:function(t){return e(M(t))},selectOrg:function(t){return e(K(t))}}})(Ke)),Ne=(n(158),n(159),n(839)),Be=n(354),Fe=function(e){function t(e,n){var r;return Object(a.a)(this,t),(r=Object(c.a)(this,Object(i.a)(t).call(this,e,n))).state={},r}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){console.log("init:",this.props),this.props.requestUserInfo()}},{key:"componentWillUpdate",value:function(e){console.log("app:",e)}},{key:"render",value:function(){return g.a.createElement("div",null,g.a.createElement(Ne.a,{basic:!0,color:"black",href:me.apiBase+"/account/azure?redirect="+window.location.href},g.a.createElement(Be.a,null,g.a.createElement("svg",{style:{marginBottom:"-1px"},xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 21 21"},g.a.createElement("title",null,"MS-SymbolLockup"),g.a.createElement("rect",{x:"1",y:"1",width:"9",height:"9",fill:"#f25022"}),g.a.createElement("rect",{x:"1",y:"11",width:"9",height:"9",fill:"#00a4ef"}),g.a.createElement("rect",{x:"11",y:"1",width:"9",height:"9",fill:"#7fba00"}),g.a.createElement("rect",{x:"11",y:"11",width:"9",height:"9",fill:"#ffb900"}))),"Sign in with Azure/Live"),g.a.createElement(Ne.a,{basic:!0,color:"black",href:me.apiBase+"/account/google?redirect="+window.location.href}," ",g.a.createElement(Be.a,{name:"google plus"}),"Sign in with Google"))}}]),t}(h.Component),Ve=Object(y.b)(function(e){return{loginType:Q(e),user:X(e)}},function(e){return{setLoginType:function(t){return e(S(t))},requestUserInfo:function(t){return e(x())}}})(Fe),De=n(257),Me=(h.Component,n(832)),We=n(841),Ye=n(836),He=n(834),Je=n(835),$e=n(185),_e=n(142),qe=n.n(_e),Qe={checkOrigin:!1},Xe=function(e){function t(e,n){var r;return Object(a.a)(this,t),(r=Object(c.a)(this,Object(i.a)(t).call(this,e,n))).handleIconChoiceChange=function(e,t){var n=t.value;console.log("update",te.a,"state:",r.state,"value:",n,"this.setState:",r.setState);var a=te()(r.state,he(["versionToSave","iconChoice",n]));console.log(a),r.setState(a)},r.handleBundleChange=function(e,t){var n=t.value;r.setState(te()(r.state,he(["versionToSave","bundleChoice",n])))},r.state={},r}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({appUriKey:this.props.match.params.appUriKey,loading:!0},function(){return e.loadApp()})}},{key:"componentDidUpdate",value:function(e){var t=this;this.state.loading||this.props.match.params.appUriKey===e.match.params.appUriKey||this.setState({loading:!0},function(){return t.loadApp()})}},{key:"loadApp",value:function(){var e=this;(!this.state.app||this.props.selectedOrg&&this.state.appUriKey)&&this.setState({loading:!0},Object(d.a)(p.a.mark(function t(){var n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r=e.props.selectedOrg.uriKey,a=e.state.appUriKey,be("/api/v0/organization/".concat(r,"/apps/").concat(a));case 2:(n=t.sent).error?console.log("error:: ",n.error):e.setState({app:n}),e.setState({loading:!1});case 5:case"end":return t.stop()}var r,a},t,this)})))}},{key:"loadVersions",value:function(e){var t=this;this.setState({loadingVersions:!0},Object(d.a)(p.a.mark(function n(){var r;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a=t.props.selectedOrg.uriKey,o=t.state.appUriKey,c=e.name,be("/api/v0/organization/".concat(a,"/apps/").concat(o,"/").concat(c));case 3:(r=n.sent).error?console.log("error:: ",r.error):t.setState({versions:{slot:e.name,versions:r}});case 5:return n.prev=5,t.setState({loadingVersions:!1}),n.finish(5);case 8:case"end":return n.stop()}var a,o,c},n,this,[[0,,5,8]])})))}},{key:"renderBundleChoice",value:function(){var e=this;switch(this.state.versionToSave.bundleChoice){case"redirect":return g.a.createElement("div",{class:"field"},g.a.createElement("label",null,"Redirect"),g.a.createElement(Me.a,{type:"text",value:this.state.versionToSave.redirect,onChange:function(t){return e.setState(te()(e.state,he(["versionToSave","redirect",t.target.value])))},name:"redirect",placeholder:"http://my-webpage.com"}));case"upload":return g.a.createElement("div",{class:"field",style:{borderStyle:"dashed",borderWidth:1,padding:"8px"}},g.a.createElement("label",null,"Bundle ",g.a.createElement("i",{style:{marginLeft:"8px",color:"#aaa"}},"a zipped bundle must at least contain an index.html-file at the root")),g.a.createElement($e.a,{multible:!1,onDrop:function(t){1===t.length&&e.setState(te()(e.state,he(["versionToSave","bundle",t[0]])))},disableClick:!0,accept:".zip"},function(t){var n=t.getRootProps,r=t.getInputProps,a=t.open;return g.a.createElement("div",n(),g.a.createElement("input",r()),g.a.createElement("p",null,"Drop .zip file here"),"\u200b",g.a.createElement(Ne.a,{basic:!0,type:"button",onClick:function(){return a()}},e.state.versionToSave.bundle?e.state.versionToSave.bundle.name:"Choose file"))}));default:return null}}},{key:"renderIconChoice",value:function(){var e=this;switch(this.state.versionToSave.iconChoice){case"relative":return g.a.createElement("div",{class:"field"},g.a.createElement("label",null,"Relative path"),g.a.createElement(Me.a,{type:"text",name:"path",value:this.state.versionToSave.iconPath,onChange:function(t){return e.setState(te()(e.state,he(["versionToSave","iconPath",t.target.value])))},placeholder:"/resources/logo.svg"}));case"static":return g.a.createElement("div",{class:"field"},g.a.createElement("label",null,"Url to icon"),g.a.createElement(Me.a,{type:"text",name:"path",value:this.state.versionToSave.iconPath,onChange:function(t){return e.setState(te()(e.state,he(["versionToSave","iconPath",t.target.value])))},placeholder:"http://your-resource-server.com/logo.svg"}));case"upload":return g.a.createElement("div",{class:"field",style:{borderStyle:"dashed",borderWidth:1,padding:"8px"}},g.a.createElement("label",null,"Upload .svg or .png ",g.a.createElement("i",{style:{marginLeft:"8px",color:"#aaa"}},"we recommend .svg for best results")),g.a.createElement($e.a,{multible:!1,onDrop:function(t){1===t.length&&e.setState(te()(e.state,he(["versionToSave","icon",t[0]])))},disableClick:!0,accept:".svg,.png"},function(t){var n=t.getRootProps,r=t.getInputProps,a=t.open;return g.a.createElement("div",n(),g.a.createElement("input",r()),g.a.createElement("p",null,"Drop .svg or .png file here"),"\u200b",g.a.createElement(Ne.a,{basic:!0,type:"button",onClick:function(){return a()}},e.state.versionToSave.icon?e.state.versionToSave.icon.name:"Choose file"))}));default:return null}}},{key:"canBeSaved",value:function(e){return"upload"===e.iconChoice&&e.icon||("redirect"===e.iconChoice||"static"===e.iconChoice)&&e.iconPath&&(e.redirect||e.bundle)&&e.version}},{key:"renderNewVersion",value:function(e){var t=this;return this.state.newVersion&&e?g.a.createElement("div",null,g.a.createElement(We.a,null,"New version"),g.a.createElement("form",{class:"ui form"},g.a.createElement("div",{class:"field"},g.a.createElement("label",null,"Version"),g.a.createElement(Me.a,{type:"text",value:this.state.versionToSave.version,onChange:function(e){return t.setState(te()(t.state,he(["versionToSave","version",e.target.value])))},name:"version",placeholder:"1.0.0"})),g.a.createElement("div",{class:"field"},g.a.createElement("label",null,"Bundle"),g.a.createElement("div",{class:"two fields"},g.a.createElement(Ye.a.Field,null,g.a.createElement(He.a,{label:"Upload bundle",name:"bundle",value:"upload",checked:"upload"===this.state.versionToSave.bundleChoice,onChange:this.handleBundleChange})),g.a.createElement(Ye.a.Field,null,g.a.createElement(He.a,{label:"Redirect to another web page",name:"bundle",value:"redirect",checked:"redirect"===this.state.versionToSave.bundleChoice,onChange:this.handleBundleChange}))),this.renderBundleChoice()),g.a.createElement("div",{class:"field"},g.a.createElement("label",null,"Icon"),g.a.createElement("div",{class:"two fields"},g.a.createElement(Ye.a.Field,null,g.a.createElement(He.a,{label:"Use icon from package",name:"radioGroup",value:"relative",checked:"relative"===this.state.versionToSave.iconChoice,onChange:this.handleIconChoiceChange})),g.a.createElement(Ye.a.Field,null,g.a.createElement(He.a,{label:"Use icon from other resource",name:"radioGroup",value:"static",checked:"static"===this.state.versionToSave.iconChoice,onChange:this.handleIconChoiceChange})),g.a.createElement(Ye.a.Field,null,g.a.createElement(He.a,{label:"Upload new icon",name:"radioGroup",value:"upload",checked:"upload"===this.state.versionToSave.iconChoice,onChange:this.handleIconChoiceChange})),g.a.createElement(Ye.a.Field,null,g.a.createElement(He.a,{label:"Use icon from last version",name:"radioGroup",value:"last",checked:"last"===this.state.versionToSave.iconChoice,onChange:this.handleIconChoiceChange}))),this.renderIconChoice()),g.a.createElement(Ne.a,{disabled:!this.canBeSaved(this.state.versionToSave),loading:this.state.saving,onClick:function(n){n.preventDefault(),console.log("saving",t.state.versionToSave),t.saveNewVersion(e)},basic:!0,color:"black"},"Save"),g.a.createElement(Ne.a,{onClick:function(){return t.setState({newVersion:!1})},basic:!0,color:"black"},"Cancel"))):g.a.createElement(Ne.a,{onClick:function(){return t.setState({newVersion:!0,versionToSave:{iconChoice:"upload",bundleChoice:"upload"}})},basic:!0,color:"black"},"New Version")}},{key:"saveNewVersion",value:function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({saving:!0}),e.prev=1,e.next=4,r=this.props.selectedOrg.uriKey,a=this.state.appUriKey,o=t,c=this.state.versionToSave,Oe("/api/v0/organization/".concat(r,"/apps/").concat(a,"/").concat(o),[{key:"version",value:c.version},{key:"bundleChoice",value:c.bundleChoice},{key:"iconChoice",value:c.iconChoice},{key:"bundle",value:c.bundle},{key:"icon",value:c.icon},{key:"redirect",value:c.redirect},{key:"useRedirect",value:c.useRedirect}]);case 4:if(!(n=e.sent)||n.error){e.next=11;break}if("Production"!==t){e.next=9;break}return e.next=9,this.loadApp(t);case 9:return e.next=11,this.loadVersions(t);case 11:return e.prev=11,this.setState({saving:!1}),e.finish(11);case 14:case"end":return e.stop()}var r,a,o,c},e,this,[[1,,11,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"renderVersions",value:function(){var e=this.state.versions;return this.state.loadingVersions?g.a.createElement(Je.a,null):e?g.a.createElement("div",{style:{marginTop:"24px"}},g.a.createElement(We.a,null,e.slot),this.renderNewVersion(e.slot),e.versions.map(function(e,t){return g.a.createElement(Ne.a,null,e.name)})):null}},{key:"renderSlots",value:function(){var e=this,t=this.state.app.slots;return g.a.createElement("div",null,g.a.createElement(We.a,{style:{marginTop:"24px"}},"Slots"),t.map(function(t,n){return g.a.createElement(Ne.a,{onClick:function(){return e.loadVersions(t)},basic:!0,style:{lineHeight:"1.6"}},t.name,g.a.createElement("br",null),g.a.createElement("span",null,g.a.createElement("i",null,null==t.latestVersion?"Non deployed":"v."+t.latestVersion)))}))}},{key:"render",value:function(){return g.a.createElement("div",null,this.state.app?g.a.createElement("div",null,g.a.createElement("h3",null,this.state.app.name),this.state.loading?null:g.a.createElement(qe.a,{style:{height:"128px",width:"128px"},iframeResizerOptions:Qe},g.a.createElement("img",{width:100,height:100,style:{marginLeft:"-0px",marginRight:"-0px"},src:"".concat(me.apiBase,"/api/v0/Organization/").concat(this.props.selectedOrg.uriKey,"/apps/").concat(this.state.app.uriKey,"/icon")})),this.renderSlots(),this.renderVersions()):null)}}]),t}(h.Component),Ze=Object(y.b)(function(e){return{selectedOrg:pe(e)}},function(e){return{}})(Xe),et=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={response:""},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUpdate",value:function(e){}},{key:"render",value:function(){return g.a.createElement(We.a,null,"Pricing")}}]),t}(h.Component),tt=Object(y.b)(function(e){return{}},function(e){return{}})(et),nt=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={response:""},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUpdate",value:function(e){}},{key:"render",value:function(){return g.a.createElement(We.a,null,"Use this service because")}}]),t}(h.Component),rt=Object(y.b)(function(e){return{}},function(e){return{}})(nt),at=n(353),ot={checkOrigin:!1},ct=function(e){function t(){return Object(a.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.appInfo;return!(!e.appInfo||e.appInfo.updated==t.updated)}},{key:"render",value:function(){var e=this.props,t=e.appInfo,n=e.selectedOrg;return g.a.createElement("div",null,g.a.createElement("div",{style:{height:"64px",width:"64px",position:"absolute"}}),g.a.createElement(qe.a,{style:{height:"64px",width:"64px"},iframeResizerOptions:ot},g.a.createElement("img",{width:50,height:50,style:{marginLeft:"-0px",marginRight:"-0px"},src:"".concat(me.apiBase,"/api/v0/Organization/").concat(n.uriKey,"/apps/").concat(t.uriKey,"/icon")})),g.a.createElement("span",{style:{fontWeight:"bold",padding:"4px",borderRadius:"8px"}},t.name))}}]),t}(h.Component),it=function(e){function t(e){return Object(a.a)(this,t),Object(c.a)(this,Object(i.a)(t).call(this,e))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.text,r=e.icon,a=e.loading;return h.createElement(Ne.a,{style:{width:"160px"},loading:a,basic:!0,color:"black",icon:!0,onClick:t},h.createElement(Be.a,{name:r}),n)}}]),t}(h.Component),st=function(e){function t(e){return Object(a.a)(this,t),Object(c.a)(this,Object(i.a)(t).call(this,e))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.text,r=e.placeholder,a=e.value;return h.createElement(Ye.a.Field,null,h.createElement(at.a,{basic:!0,pointing:"below"},n),h.createElement(Me.a,{type:"text",defaultValue:a,placeholder:r,id:null,autoComplete:"nope",onChange:t}))}}]),t}(h.Component),lt=function(e){function t(e){return Object(a.a)(this,t),Object(c.a)(this,Object(i.a)(t).call(this,e))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.selectedOrg,r=e.appInfo;return h.createElement(Ne.a,{basic:!0,style:{height:"64px",width:"64px",padding:0},as:E.NavLink,to:t},h.createElement(ct,{selectedOrg:n,appInfo:r}))}}]),t}(h.Component),ut=(n(609),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={response:""},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){console.log("init:",this.props),this.props.apps&&this.props.apps.map||(this.props.getApps(),this.loadGroups())}},{key:"componentWillUpdate",value:function(e){this.props.selectedOrg&&e.selectedOrg&&(this.props.selectedOrg.id!=e.selectedOrg.id||this.props.selectedOrg.enabled!=e.selectedOrg.enabled)&&(this.props.getApps(),this.loadGroups()),console.log("Main: ",e)}},{key:"saveApp",value:function(){var e=Object(d.a)(p.a.mark(function e(t,n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setOrgProperty(he(["apps",n,"saving",!0],["apps",n,"error",null])),r=t,e.prev=2,e.next=5,xe(this.props.selectedOrg.uriKey,t);case 5:(r=e.sent).error?this.props.setOrgProperty(he(["apps",n,"saving",!1],["apps",n,"error",r.error])):this.props.setOrgProperty(he(["apps",n,"saving",!1],["apps",n,r]));case 7:return e.prev=7,this.props.setOrgProperty(he(["apps",n,"saving",!0])),e.finish(7);case 10:case"end":return e.stop()}},e,this,[[2,,7,10]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"init",value:function(e){var t=this;return g.a.createElement(Ye.a,null,g.a.createElement(Ye.a.Field,null,g.a.createElement(st,{value:e.name,placeholder:"Organization name",text:"Your organization is unknown to us. Please enter the correct name of this organization",onChange:function(e){return t.props.setProperty(he(["selectedOrg","name",e.target.value]))}})),g.a.createElement(it,{onClick:function(){return t.props.enablingOrg?null:t.props.enableOrg(e)},loading:this.props.enablingOrg,text:this.props.enablingOrg?"Enabling":"Ok"}))}},{key:"firstUser",value:function(e){return[g.a.createElement("p",null,"You are the first to join ",g.a.createElement("i",null,e.name),", welcome!"),g.a.createElement("p",null,"Since you are the first to join, you will have administrator rights to this account. You can add other user and distribute rights as you see fit"),g.a.createElement("p",null,e.name," is added under the ",g.a.createElement(E.Link,{to:"/pricing"},"free subscription")," which is limited to up to 20 users and 10 apps. Go to ",g.a.createElement(E.Link,{to:"/account"},"account administration")," to administer users and account information",g.a.createElement("br",null),g.a.createElement("br",null))]}},{key:"personal",value:function(e){return g.a.createElement("p",null,"This is your personal account. You can use this for testing")}},{key:"guest",value:function(e){return g.a.createElement("p",null,"You are are invited as a member of this account")}},{key:"newApp",value:function(e,t){var n=this;return g.a.createElement(Ye.a,null,g.a.createElement(ze.a,{stackable:!0,style:{marginTop:"0px",marginLeft:"0px"}},g.a.createElement(ze.a.Row,{columns:3},g.a.createElement(ze.a.Column,null,g.a.createElement(Ye.a.Field,null,g.a.createElement(st,{text:"Application name",value:e.name,placeholder:"App name",onChange:function(e){return n.props.setOrgProperty(he(["apps",t,"name",e.target.value]))}}))),g.a.createElement(ze.a.Column,null,g.a.createElement(Ye.a.Field,null,g.a.createElement(st,{label:this.props.selectedOrg.uriKey+"-",value:e.uriKey,placeholder:"uri",text:"App URI",onChange:function(e){return n.props.setOrgProperty(he(["apps",t,"uriKey",e.target.value]))}}))),g.a.createElement(ze.a.Column,null,g.a.createElement(Ye.a.Field,null,g.a.createElement("div",{style:{marginTop:"40px"}}),g.a.createElement(it,{loading:e.saving,onClick:function(){return n.saveApp(e,t)},icon:"save",text:"Save"}),g.a.createElement(it,{onClick:function(){return n.props.setOrgProperty(fe(["apps",t]))},icon:"cancel",text:"Cancel"}))))))}},{key:"oldApp",value:function(e,t){return g.a.createElement(lt,{to:"/app/"+e.uriKey,selectedOrg:this.props.selectedOrg,appInfo:e})}},{key:"apps",value:function(){var e=this;return g.a.createElement("div",null,g.a.createElement(We.a,null,"Apps"),g.a.createElement(it,{icon:"plus",text:"Add app",onClick:function(){return e.props.setOrgProperty(ge(["apps",{name:"New app",newApp:!0}]))}}),g.a.createElement(ze.a,{style:{marginTop:"16px",marginLeft:"0px"}},this.props.apps.map(function(t,n){return t.newApp?g.a.createElement(ze.a.Row,{column:1},g.a.createElement(ze.a.Column,null,e.newApp(t,n))):null}),g.a.createElement(ze.a.Row,{columns:8},this.props.apps.map(function(t,n){return t.newApp?null:g.a.createElement(ze.a.Column,null,e.oldApp(t,n))}))))}},{key:"loadGroups",value:function(){var e=this;this.setState({loadingGroups:!0},Object(d.a)(p.a.mark(function t(){var n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r=e.props.selectedOrg.uriKey,be("/api/v0/organization/".concat(r,"/groups"));case 3:(n=t.sent).error?console.log("group error:: ",n.error):e.props.setOrgProperty(he(["groups",n]));case 5:return t.prev=5,e.setState({loadingGroups:!1}),t.finish(5);case 8:case"end":return t.stop()}var r},t,this,[[0,,5,8]])})))}},{key:"saveGroup",value:function(){var e=Object(d.a)(p.a.mark(function e(t,n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setOrgProperty(he(["groups",n,"saving",!0])),e.next=3,Se(this.props.selectedOrg.uriKey,t);case 3:(r=e.sent).error?this.props.setOrgProperty(he(["groups",n,"saving",!1],["groups",n,"error",r.error])):this.props.setOrgProperty(he(["groups",n,r]));case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteGroup",value:function(){var e=Object(d.a)(p.a.mark(function e(t,n){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isNew){e.next=4;break}this.props.setOrgProperty(fe(["groups",n])),e.next=9;break;case 4:return this.props.setOrgProperty(he(["groups",n,"saving",!0])),e.next=7,Te(this.props.selectedOrg.uriKey,t);case 7:(r=e.sent).error?this.props.setOrgProperty(he(["groups",n,"saving",!1],["groups",n,"error",r.error])):this.props.setOrgProperty(fe(["groups",n]));case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"cancelEditGroup",value:function(e,t){if(e.new){var n=fe(["groups",t]);this.props.setOrgProperty(n)}else{var r=he(["groups",t,Object(J.a)({},e.original)]);this.props.setOrgProperty(r)}}},{key:"editGroup",value:function(e,t){var n=he(["groups",t,"edit",!0],["groups",t,"original",Object(J.a)({},e)]);this.props.setOrgProperty(n)}},{key:"showAddUserToGroup",value:function(e,t){he(["groups",t,"showAddUser",!0])}},{key:"searchForUsers",value:function(){var e=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(this.props.selectedOrg,null,t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"renderAddUser",value:function(e,t){var n=this;return g.a.createElement(Ye.a,null,g.a.createElement(st,{onChange:function(e){return n.props.setOrgProperty(he(["groups",t,"name",e.target.value]))},text:"Group Name",placeholder:"Group name",value:e.name}))}},{key:"renderGroup",value:function(e,t){var n=this;return g.a.createElement(Ye.a,null,g.a.createElement(ze.a,{stackable:!0,style:{marginTop:"0px",marginLeft:"0px"}},g.a.createElement(ze.a.Row,{columns:2},g.a.createElement(ze.a.Column,null,e.edit?g.a.createElement(Ye.a.Field,null,g.a.createElement(st,{onChange:function(e){return n.props.setOrgProperty(he(["groups",t,"name",e.target.value]))},text:"Group Name",placeholder:"Group name",value:e.name}),g.a.createElement(it,{loading:e.saving,onClick:function(){return n.showAddUserToGroup(e,t)},text:"Add user(s) to group",icon:"plus"})):g.a.createElement(Ye.a.Field,null,g.a.createElement("span",{className:"ui input",style:{paddingTop:"32px"}},e.name+(void 0===e.userCount?null:" (".concat(e.userCount," users)"))))),g.a.createElement(ze.a.Column,null,g.a.createElement(Ye.a.Field,null,g.a.createElement("div",{style:{marginTop:"40px"}}),e.edit?g.a.createElement("div",null,g.a.createElement(it,{loading:e.saving,onClick:function(){return n.saveGroup(e,t)},text:"Save",icon:"save"}),g.a.createElement(it,{loading:e.saving,onClick:function(){return n.cancelEditGroup(e,t)},text:"Cancel",icon:"cancel"})):g.a.createElement("div",null,g.a.createElement(it,{loading:e.saving,onClick:function(){return n.editGroup(e,t)},text:"Edit",icon:"edit"}),g.a.createElement(it,{loading:e.saving,onClick:function(){return n.deleteGroup(e,t)},text:"Delete",icon:"remove"})))))))}},{key:"renderGroups",value:function(){var e=this;return this.props.groups?g.a.createElement("div",null,g.a.createElement(it,{icon:"plus",text:"Add group",onClick:function(){return e.props.setOrgProperty(ge(["groups",{name:"New group",isNew:!0,edit:!0}]))}}),g.a.createElement(ze.a,{style:{marginTop:"16px",marginLeft:"0px"}},this.props.groups.map(function(t,n){return g.a.createElement(ze.a.Row,{column:1},g.a.createElement(ze.a.Column,null,e.renderGroup(t,n)))}))):g.a.createElement("span",null,"No groups:(")}},{key:"main",value:function(){return console.log("apps:",this.props.apps),[this.props.apps&&this.props.apps.map?this.apps():null,g.a.createElement("div",null,g.a.createElement("h4",null,"Groups"),this.state.loadingGroups?g.a.createElement("span",null,"Loading..."):this.renderGroups())]}},{key:"render",value:function(){return g.a.createElement("div",null,this.props.userOrgs.length>0&&null!==this.props.selectedOrg?g.a.createElement("div",null,[this.props.selectedOrg.enabled?1!==this.props.selectedOrg.numberOfUsers||this.props.selectedOrg.personal?null:this.firstUser(this.props.selectedOrg):this.init(this.props.selectedOrg),this.props.selectedOrg.personal&&this.props.selectedOrg.owner&&this.props.selectedOrg.owner.key===this.props.user.key?this.personal(this.props.selectedOrg):null,this.props.selectedOrg.personal&&this.props.selectedOrg.owner&&this.props.selectedOrg.owner.key!==this.props.user.key?this.personal(this.props.selectedOrg):null,this.props.selectedOrg.enabled?this.main():null]):null)}}]),t}(h.Component)),pt=Object(y.b)(function(e){return{loginType:Q(e),user:X(e),userOrgs:le(e),selectedOrg:pe(e),enablingOrg:ue(e),apps:de(e),groups:function(e){return se(e).groups}(e)}},function(e){var t;return t={setLoginType:function(t){return e(S(t))},requestUserInfo:function(t){return e(x())},enableOrg:function(t){return e(z(t))},setProperty:function(t){return e(M(t))},setOrgProperty:function(t){return e(W(t))}},Object(H.a)(t,"enableOrg",function(t){return e(z(t))}),Object(H.a)(t,"saveApp",function(t){return e(N(t))}),Object(H.a)(t,"getApps",function(t){return e(F(t))}),t})(ut),dt=function(e){return g.a.createElement("a",e,e.children)},ht=function(e){function t(e,n){var r;return Object(a.a)(this,t),(r=Object(c.a)(this,Object(i.a)(t).call(this,e,n))).state={},r}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.selectedOrg||this.props.selectOrg({key:this.props.match.params.orgUriKey})}},{key:"loadPolicy",value:function(){var e=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadAppPage",value:function(){var e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r=this.props.match.params.orgUriKey,be("/api/v0/organization/".concat(r,"/app-page"));case 2:if(!(t=e.sent).error){e.next=11;break}return console.log("error!",t.error),e.next=7,Ce(this.props.match.params.orgUriKey);case 7:n=e.sent,this.setState({policy:n,notLoggedIn:"NOAUTH"===t.error,error:t.error}),e.next=12;break;case 11:this.props.setOrgProperty(he(["appPage",t]));case 12:case"end":return e.stop()}var r},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){!this.props.selectedOrg||this.props.appPage.org||this.state.notLoggedIn||this.loadAppPage(),this.state.notLoggedIn&&this.state.policy&&"own"===this.state.policy.policy&&("azure"===this.state.policy.provider?window.location.href=me.apiBase+"/account/azure?redirect="+window.location.href:"google"===this.state.policy.provider&&(window.location.href=me.apiBase+"/account/google?redirect="+window.location.href))}},{key:"renderAll",value:function(e){return g.a.createElement("div",null,this.renderOrg(e.org),this.renderApps(e.org,e.apps))}},{key:"renderOrg",value:function(e){return g.a.createElement(We.a,null,e.name)}},{key:"renderApps",value:function(e,t){var n=this;return g.a.createElement(ze.a,{doubling:!0,columns:5},t.map(function(t,r){return g.a.createElement(ze.a.Column,null,n.renderApp(e,t,r))}))}},{key:"renderApp",value:function(e,t,n){return g.a.createElement(Ne.a,{basic:!0,style:{height:"64px",width:"64px",padding:0},as:dt,href:me.apiBase+"/app/"+e.uriKey+"/"+t.uriKey},g.a.createElement(ct,{selectedOrg:e,appInfo:t}))}},{key:"render",value:function(){return g.a.createElement("div",null,this.props.appPage&&this.props.appPage.org?this.renderAll(this.props.appPage):null,this.state.notLoggedIn&&this.state.policy?g.a.createElement("div",null,"all"===this.state.policy.policy?g.a.createElement("div",null,g.a.createElement(Ne.a,{basic:!0,color:"black",href:me.apiBase+"/account/azure?redirect="+window.location.href},g.a.createElement(Be.a,null,g.a.createElement("svg",{style:{marginBottom:"-1px"},xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 21 21"},g.a.createElement("title",null,"MS-SymbolLockup"),g.a.createElement("rect",{x:"1",y:"1",width:"9",height:"9",fill:"#f25022"}),g.a.createElement("rect",{x:"1",y:"11",width:"9",height:"9",fill:"#00a4ef"}),g.a.createElement("rect",{x:"11",y:"1",width:"9",height:"9",fill:"#7fba00"}),g.a.createElement("rect",{x:"11",y:"11",width:"9",height:"9",fill:"#ffb900"}))),"Sign in with Azure/Live"),g.a.createElement(Ne.a,{basic:!0,color:"black",href:me.apiBase+"/account/google?redirect="+window.location.href}," ",g.a.createElement(Be.a,{name:"google plus"}),"Sign in with Google")):null):null)}}]),t}(h.Component),gt=Object(y.b)(function(e){return{loginType:Q(e),user:X(e),userOrgs:le(e),selectedOrg:pe(e),enablingOrg:ue(e),apps:de(e),appPage:function(e){return se(e).appPage}(e)}},function(e){return{setLoginType:function(t){return e(S(t))},setProperty:function(t){return e(M(t))},selectOrg:function(t){return e(K(t))},setOrgProperty:function(t){return e(W(t))},getApps:function(t){return e(F(t))}}})(ht),ft=(n(610),function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={response:""},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){console.log("init:",this.props)}},{key:"componentWillUpdate",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this;return g.a.createElement(E.Switch,null,g.a.createElement(E.Route,{path:"/:orgUriKey/apps",component:gt}),g.a.createElement(E.Route,{render:function(){return g.a.createElement(ze.a,{stackable:!0},g.a.createElement(ze.a.Row,null,g.a.createElement(ze.a.Column,null,g.a.createElement(Le,null))),g.a.createElement(ze.a.Row,{className:"page",columns:1},g.a.createElement(ze.a.Column,null,g.a.createElement(k.ToastContainer,{autoClose:15e3,position:"top-center"}),e.props.user&&e.props.selectedOrg?g.a.createElement("div",null,g.a.createElement(E.Switch,null,g.a.createElement(E.Redirect,{path:"/null",to:"/"}),g.a.createElement(E.Route,{path:"/",component:pt,exact:!0})),g.a.createElement(E.Route,{path:"/pricing",component:tt}),g.a.createElement(E.Route,{path:"/about",component:rt}),g.a.createElement(E.Route,{path:"/app/:appUriKey",component:Ze})):g.a.createElement("div",null,g.a.createElement(E.Switch,null,g.a.createElement(E.Redirect,{path:"/null",to:"/",exact:!0}),g.a.createElement(E.Route,{path:"/:stuff",component:Ve}),g.a.createElement(E.Route,{path:"/",component:Ve,exact:!0})),g.a.createElement(E.Route,{path:"/pricing",component:tt,exact:!0}),g.a.createElement(E.Route,{path:"/about",component:rt,exact:!0})))))}}))}}]),t}(h.Component)),mt=Object(E.withRouter)(Object(y.b)(function(e){return{errors:function(e){return ie(e).errors}(e),user:X(e),selectedOrg:pe(e)}},function(e){return{clearErrors:function(t){return e(U())}}})(ft)),vt=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).state={response:""},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUpdate",value:function(e){}},{key:"routes",value:function(){return g.a.createElement(mt,null)}},{key:"render",value:function(){return this.routes()}}]),t}(h.Component),bt=Object(E.withRouter)(Object(y.b)(function(e){return{loginType:Q(e),user:X(e)}},function(e){return{}})(vt));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(612),n(814);var Ot=n(54),yt=(n(815),n(816),n(89)),Et=n(385),kt=n(386),jt=n(20),xt=p.a.mark(It),wt=p.a.mark(zt),Ct=p.a.mark(Gt),St=p.a.mark(Kt),Tt=p.a.mark(Lt),At=p.a.mark(Nt),Pt=p.a.mark(Bt),Ut=function(e){return{user:e.sec.user,userOrgs:e.app.userOrgs,selectedOrg:e.app.selectedOrg}};function It(e){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jt.b)(Pe);case 2:return e.next=4,Object(jt.c)(T());case 4:return e.next=6,Object(jt.c)(Object(Ue.b)("/"));case 6:case"end":return e.stop()}},xt,this)}function zt(e,t,n){return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e=e||{error:"...We don't know what went wrong:("},r.prev=1,400!=e.status){r.next=9;break}if(n.message=e.response._bodyText,!t){r.next=7;break}return r.next=7,Object(jt.c)(t(n));case 7:r.next=23;break;case 9:if(401!=e.status){r.next=13;break}Object(Ue.b)("/"),r.next=23;break;case 13:if(403!=e.status){r.next=19;break}if(!t){r.next=17;break}return r.next=17,Object(jt.c)(t(n));case 17:r.next=23;break;case 19:if(!t){r.next=22;break}return r.next=22,Object(jt.c)(t(e));case 22:return r.delegateYield(Gt(e),"t0",23);case 23:r.next=28;break;case 25:r.prev=25,r.t1=r.catch(1),console.log(r.t1);case 28:case"end":return r.stop()}},wt,this,[[1,25]])}function Rt(e){var t,n=e.message||e.error||e;return null===(t=n)||"function"!==typeof t&&"object"!==typeof t?n:JSON.stringify(n)}function Gt(e){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{console.log("Error!",e.payload),k.toast.error(Rt(e.payload||e))}catch(n){console.log(n)}case 1:case"end":return t.stop()}},Ct,this)}function Kt(e){var t;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(jt.b)(Ee);case 3:if(!(t=n.sent)||t.error){n.next=16;break}return n.next=7,Object(jt.c)(S(t.source));case 7:return n.next=9,Object(jt.c)(C(t));case 9:return n.next=11,Object(jt.d)(Ut);case 11:if(0!==n.sent.userOrgs.length){n.next=14;break}return n.delegateYield(Bt(e),"t0",14);case 14:n.next=24;break;case 16:return n.next=18,Object(jt.d)(Ut);case 18:if(!n.sent.user){n.next=24;break}return n.next=22,Object(jt.c)(w());case 22:return n.next=24,Object(jt.c)(Object(Ue.b)("/"));case 24:n.next=36;break;case 26:return n.prev=26,n.t1=n.catch(0),n.next=30,Object(jt.d)(Ut);case 30:if(!n.sent){n.next=36;break}return n.next=34,Object(jt.c)(w());case 34:return n.next=36,Object(jt.c)(Object(Ue.b)("/"));case 36:case"end":return n.stop()}},St,this,[[0,26]])}function Lt(e){var t,n;return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(jt.d)(Ut);case 3:if(t=r.sent,console.log("state in getApps",t),t.selectedOrg&&t.selectedOrg.uriKey){r.next=7;break}return r.abrupt("return");case 7:return r.next=9,Object(jt.b)(function(){return we(t.selectedOrg.uriKey)});case 9:if(!(n=r.sent)||n.error){r.next=15;break}return r.next=13,Object(jt.c)(V(n));case 13:r.next=16;break;case 15:return r.delegateYield(zt(n,D,e.payload),"t0",16);case 16:r.next=22;break;case 18:return r.prev=18,r.t1=r.catch(0),console.log("ex",r.t1),r.delegateYield(zt(r.t1,D,e.payload),"t2",22);case 22:case"end":return r.stop()}},Tt,this,[[0,18]])}function Nt(e){var t;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(jt.b)(function(){return je(e.payload)});case 3:if(!(t=n.sent)||t.error){n.next=9;break}return n.next=7,Object(jt.c)(R(t));case 7:n.next=10;break;case 9:return n.delegateYield(zt(t,null,e.payload),"t0",10);case 10:n.next=16;break;case 12:return n.prev=12,n.t1=n.catch(0),console.log("ex",n.t1),n.delegateYield(zt(n.t1,null,e.payload),"t2",16);case 16:case"end":return n.stop()}},At,this,[[0,12]])}function Bt(e){var t;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(jt.b)(ke);case 3:if(!(t=n.sent)||t.error){n.next=9;break}return n.next=7,Object(jt.c)(G(t));case 7:n.next=10;break;case 9:return n.delegateYield(zt(t,L,e.payload),"t0",10);case 10:n.next=15;break;case 12:return n.prev=12,n.t1=n.catch(0),n.delegateYield(zt(n.t1,L,e.payload),"t2",15);case 15:case"end":return n.stop()}},Pt,this,[[0,12]])}var Ft=p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jt.a)([Object(jt.e)("".concat(x),Kt),Object(jt.e)("".concat(A),It),Object(jt.e)("".concat(I),Bt),Object(jt.e)("".concat(z),Nt),Object(jt.e)("".concat(F),Lt)]);case 2:case"end":return e.stop()}},e,this)}),Vt=n(360);var Dt=document.getElementsByTagName("base")[0].getAttribute("href"),Mt=Object(Ot.a)({basename:Dt}),Wt=document.getElementById("root"),Yt=function(e){var t={app:oe,sec:_},n=Object(kt.a)(),r=[Et.a,Object(Ue.c)(e),n],a=[],o=Object(yt.c)(Object(J.a)({},t,{routing:Ue.d})),c=Object(yt.a)(Object(Vt.save)({states:["sec"],namespace:"apps"}))(yt.e)(o,Object(Vt.load)({states:["sec"],namespace:"apps"}),yt.d.apply(void 0,[yt.a.apply(void 0,r)].concat(a)));return n.run(Ft),c}(Mt);O.a.render(g.a.createElement(y.a,{store:Yt},g.a.createElement(Ue.a,{history:Mt},g.a.createElement(bt,null))),Wt);!function(){console.log("Initializing GAPI..."),console.log("Creating the google script tag...");var e=document.createElement("script");e.onload=function(){console.log("Loaded script, now loading our api..."),function e(t){console.log("Trying To Load Client!"),console.log(t),t.getAttribute("gapi_processed")?console.log("Client is ready! Now you can access gapi. :)"):(console.log("Client wasn't ready, trying again in 100ms"),setTimeout(function(){e(t)},100))}(e)},e.src="https://apis.google.com/js/platform.js?onload=init",document.body.appendChild(e)}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[400,2,1]]]);
//# sourceMappingURL=main.b111d4dd.chunk.js.map