{"version":3,"sources":["logo.svg","components/react_adal/react-adal-google.js","adalConfig.js","actions/index.js","reducers/Sec.js","reducers/App.js","services/api.js","components/Header.js","components/App.js","components/sub/FileButton/index.js","components/AppDef.js","components/Pricing.js","components/About.js","components/sub/AppIcon.js","components/sub/Components.js","components/Main.js","components/Apps.js","components/Layout.js","Routes.js","serviceWorker.js","sagas/index.js","index.js","store/configureStore.js"],"names":["module","exports","__webpack_require__","p","adalConfig","tenant","clientId","endpoints","api","cacheLocation","popUp","AuthenticationContext","requestUserInfo","createAction","requestUserInfoFailed","requestUserInfoSuccess","setLoginType","setSecReset","signOut","globalErrors","globalErrorsClear","getUserOrgs","enableOrg","enableOrgOk","setUserOrgs","selectOrg","setUserOrgsFailed","saveApp","saveAppOk","getApps","getAppsOk","getAppsFailed","setProperty","setOrgProperty","reducer","handleActions","_handleActions","Object","defineProperty","actions","state","action","objectSpread","loginType","payload","loginFailed","loggedIn","user","token","getSec","sec","defaultOrgState","apps","appPage","org","App_handleActions","userOrgs","errors","toConsumableArray","concat","gettingUserOrgs","res","selectedOrg","_","find","i","organizationKey","key","update","CreateUpdate","orgIndex","findIndex","id","updateOrgs","name","uriKey","gettingApp","updateApp","getOrg","appIndex","test","enablingOrg","orgAuthPolicy","getData","app","getDataInContextOfOrg","index","arguments","length","element","undefined","tmp","tmp2","$set","CreateAdd","$push","CreateRemove","$splice","readCookie","nameEQ","ca","document","cookie","split","console","log","c","charAt","substring","indexOf","apiRequest","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","url","params","noAuth","query","firstSet","wrap","_context","prev","next","config","scheme","push","value","encodeURIComponent","abrupt","fetch","apiBase","method","mode","credentials","headers","Content-Type","then","response","status","error","contentType","get","json","data","text","statusText","catch","stop","this","_x","_x2","_x3","apply","upload","_ref2","_callee2","_context2","FormData","append","body","_x4","_x5","post","JSON","stringify","getUserInfo","orgUriKey","getOrgAuthPolicy","saveOrgGroup","group","deleteOrgGroup","getUsers","groupId","filter","take","skip","logOut","Header","Component","handleContextRef","contextRef","_this","setState","nextProps","_this2","react_default","createElement","Sticky","context","Grid","columns","Column","width","Menu","pointing","secondary","stackable","style","backgroundColor","paddingLeft","Item","react_router_dom_es","className","to","height","viewBox","xmlns","fill","y","x","display","overflow","stroke-width","d","stroke","as","NavLink","exact","content","props","Dropdown","item","icon","map","onClick","withRouter","connect","appReducer","dispatch","v","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Button_Button","basic","color","href","window","location","Icon","marginBottom","iframeResizerOptions","checkOrigin","AppDef","handleIconChoiceChange","e","u","handleBundleChange","appUriKey","match","loading","loadApp","prevProps","_this3","_this4","sent","slot","_this5","loadingVersions","versions","slotId","finish","_this6","versionToSave","bundleChoice","class","Input_Input","type","redirect","onChange","target","placeholder","borderStyle","borderWidth","padding","marginLeft","dist_es","multible","onDrop","files","disableClick","accept","_ref5","getRootProps","getInputProps","open","bundle","_this7","iconChoice","iconPath","_ref6","version","_this8","newVersion","elements_Header_Header","Form","Field","Radio","label","checked","renderBundleChoice","renderIconChoice","disabled","canBeSaved","saving","preventDefault","saveNewVersion","slotName","useRedirect","loadVersions","Loader","marginTop","renderNewVersion","_this9","slots","s","lineHeight","latestVersion","dist_default","marginRight","src","renderSlots","renderVersions","Pricing","About","AppIcon","appInfo","updated","_this$props","position","fontWeight","borderRadius","Button","_Component","inherits","createClass","react","Input","_Component2","_this$props2","Label","defaultValue","autoComplete","AppNavButton","_Component3","_this$props3","AppIcon_AppIcon","Main","loadGroups","enabled","Components_Input","Components_Button","Row","Components_AppNavButton","newApp","column","oldApp","loadingGroups","groups","saved","isNew","new","newStateUpdate","original","users","edit","showAddUserToGroup","paddingTop","userCount","saveGroup","cancelEditGroup","editGroup","deleteGroup","renderGroup","renderGroups","numberOfUsers","personal","firstUser","init","owner","main","children","Apps","policy","notLoggedIn","loadAppPage","provider","renderOrg","renderApps","doubling","renderApp","renderAll","Layout","path","component","render","components_Header","lib","autoClose","secReducer","clearErrors","Routes","components_Layout","routes","Boolean","hostname","requestErrorHandling","generalError","getState","put","_marked","failedRequest","actionToFire","message","_bodyText","delegateYield","t1","_marked2","errorMessage","val","msg","_context3","toast","_marked3","_context4","source","select","_marked4","_context6","_marked6","_context7","_marked7","_context8","_marked8","root","rootSaga","_context9","all","takeLatest","baseUrl","getElementsByTagName","getAttribute","history","createBrowserHistory","basename","rootElement","getElementById","store","reducers","Sec","sageMiddleware","createSagaMiddleware","middleware","thunk","routerMiddleware","enhancers","rootReducer","combineReducers","routing","routerReducer","applyMiddleware","save","states","namespace","createStore","createStoreWithMiddleware","load","compose","run","sagas","configureStore","ReactDOM","es","react_router_redux_es","src_Routes","script","onload","loadClientWhenGapiReady","setTimeout","appendChild","initGapi","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e1f7a13e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","// eslint-disable-next-line\r\nimport React from 'react';\r\n\r\n\r\n\r\nexport function googleGetToken() {\r\n  return new Promise((resolve, reject) => {\r\n    \r\n    googleSecureCall(()=>{resolve(window.gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token)},\r\n     (e)=>reject(e)\r\n    );\r\n    \r\n    /*authContext.acquireToken(resourceGuiId, (message, token, msg) => {\r\n      if (!msg) resolve(token);\r\n      // eslint-disable-next-line\r\n      else reject({ message, msg });\r\n    });*/\r\n  });\r\n}\r\n\r\n/*export function runWithAdal(authContext, app, doNotLogin) {\r\n  //it must run in iframe to for refreshToken (parsing hash and get token)\r\n  authContext.handleWindowCallback();\r\n\r\n  //prevent iframe double app !!!\r\n  if (window === window.parent) {\r\n    if (!authContext.isCallback(window.location.hash)) {\r\n      if (!authContext.getCachedToken(authContext.config.clientId) ||\r\n          !authContext.getCachedUser()) {\r\n        if (doNotLogin) {\r\n          app();\r\n        } else {\r\n          authContext.login();\r\n        }\r\n      } else {\r\n        app();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function googleFetch(authContext, resourceGuiId, fetch, url, options) {\r\n  return googleGetToken(authContext, resourceGuiId).then((token) => {\r\n    const o = options || {};\r\n    if (!o.headers) o.headers = {};\r\n    o.headers.Authorization = `Bearer ${token}`;\r\n    return fetch(url, o);\r\n  });\r\n}\r\n*/\r\n// eslint-disable-next-line\r\n/*export const withGoogleLogin = (authContext, resourceId) => {\r\n  // eslint-disable-next-line\r\n  return function(WrappedComponent, renderLoading, renderError) {\r\n    return class extends React.Component {\r\n      constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n          logged: false,\r\n          error: null,\r\n        };\r\n      }\r\n\r\n      componentWillMount = () => {\r\n        googleGetToken(authContext, resourceId)\r\n          .then(() => this.setState({ logged: true }))\r\n          .catch((error) => {\r\n            const { msg } = error;\r\n            console.log(error);\r\n            \r\n            if (msg === 'login required') {\r\n              authContext.login();\r\n            } else {\r\n              authContext.login();\r\n            }\r\n          });\r\n      };\r\n\r\n      render() {\r\n        if (this.state.logged) return <WrappedComponent {...this.props} />;\r\n        if (this.state.error) return typeof renderError === 'function' ? renderError(this.state.error) : null;\r\n        return typeof renderLoading === 'function' ? renderLoading() : null;\r\n      }\r\n    };\r\n  };\r\n};*/\r\n\r\nexport const googleSecureCall = async (f) => {\r\n  \r\n  let auth = window.gapi.auth2.getAuthInstance();  \r\n  let signedIn = auth.currentUser.get();\r\n  console.log('signedIn:', signedIn.getBasicProfile());\r\n    if (!signedIn){\r\n      let r = await auth.signIn();\r\n       console.log('Google res:, ',r); \r\n        \r\n      let signedIn = window.gapi.auth2.currentUser.get();\r\n      if (signedIn) {\r\n        return f();\r\n      }\r\n      \r\n    }\r\n    else{\r\n      return f();\r\n    }\r\n  }\r\n\r\nexport const withGoogleLogin = () => {\r\n  // eslint-disable-next-line\r\n  return function(WrappedComponent, renderLoading, renderError) {\r\n    return class extends React.Component {\r\n      constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n          logged: false,\r\n          error: null,\r\n        };\r\n      }\r\n\r\n      checkGapi = () => {\r\n        let gapi = window.gapi;\r\n        if (!window.googleReady && (!gapi || !gapi.auth2)){\r\n          console.log('waiting for gapi');\r\n          if (gapi && !gapi.auth2) gapi.load('auth2', function() { \r\n            window.googleReady = true;\r\n            window.gapi.auth2.init({ux_mode:'popup',\r\n            client_id:'1008335591690-9mgv2poc3vpi0ke1fi7c5m1dl2sejjru.apps.googleusercontent.com',scope:'email openid'});\r\n            \r\n            \r\n            this.setState({auth:true});\r\n            /*window.gapi.auth2.init({client_id:'1008335591690-9mgv2poc3vpi0ke1fi7c5m1dl2sejjru.apps.googleusercontent.com'});  \r\n            window.gapi.auth2.isSignedIn.listen(() =>console.log('Signin state changed to ', val));*/\r\n\r\n          }.bind(this));\r\n          /*if (gapi && gapi.auth2) gapi.auth2.init();\r\n          if (gapi && gapi.auth2 && gapi.auth2.GoogleAuth.then) gapi.auth2.GoogleAuth.then(()=>this.setState({auth:window.gapi.auth2.GoogleAuth}),(e)=>this.setState({error:e}))*/\r\n          \r\n          setTimeout(() => {this.checkGapi()}, 100);\r\n          this.setState({ready:false});\r\n          return;\r\n        }\r\n      \r\n         this.setState({logged:true}); \r\n\r\n        }\r\n        \r\n\r\n\r\n\r\n      \r\n\r\n      componentWillMount = () => {\r\n        \r\n        /*let gapi = window.gapi\r\n        googleGetToken(authContext, resourceId)\r\n          .then(() => this.setState({ logged: true }))\r\n          .catch((error) => {\r\n            const { msg } = error;\r\n            console.log(error);\r\n            \r\n            if (msg === 'login required') {\r\n              authContext.login();\r\n            } else {\r\n              authContext.login();\r\n            }\r\n          });*/\r\n\r\n          this.checkGapi();\r\n      };\r\n\r\n      render() {\r\n        if (this.state.logged) return <WrappedComponent {...this.props} />;\r\n        if (this.state.error) return typeof renderError === 'function' ? renderError(this.state.error) : null;\r\n        return typeof renderLoading === 'function' ? renderLoading() : null;\r\n      }\r\n    };\r\n  };\r\n};\r\n\r\n","import { AuthenticationContext, adalFetch, withAdalLogin, adalGetToken } from 'react-adal';\r\n\r\nimport { withGoogleLogin, googleGetToken, googleSecureCall} from './components/react_adal/react-adal-google';\r\n\r\nexport const adalConfig = {\r\n  tenant: 'common',\r\n  clientId: '9f256bb0-1a93-4247-9e1e-bbd05532e2ce',\r\n  \r\n endpoints: {\r\n    api: '9f256bb0-1a93-4247-9e1e-bbd05532e2ce',\r\n  },\r\n  cacheLocation: 'localStorage',\r\n  popUp:true\r\n};\r\n\r\nexport const googleConfig = {\r\n  tenant: null,\r\n  name:'google',\r\n  clientId: '1008335591690-9mgv2poc3vpi0ke1fi7c5m1dl2sejjru.apps.googleusercontent.com',\r\n  authorize: 'auth',\r\n  endpoints: {\r\n    api: 'testApi',\r\n  },\r\n  scope: 'profile email',\r\n  popUp:false,\r\n  navigateToLoginRequestUrl:false,\r\n  instance:'https://accounts.google.com/o/oauth2/v2/',\r\n  cacheLocation: 'localStorage',\r\n // state:'pass-through value'\r\n};\r\n\r\nexport const authContext = new AuthenticationContext(adalConfig);\r\n\r\nexport const adalApiFetch = (fetch, url, options) =>\r\n  adalFetch(authContext, adalConfig.endpoints.api, fetch, url, options);\r\n\r\nexport const withAdalLoginApi = ()=>{authContext.handleWindowCallback(); return withAdalLogin(authContext, adalConfig.endpoints.api)};\r\n\r\n//export const authGoogleContext = new GoogleAuthenticationContext(googleConfig);\r\n\r\n/*export const googleApiFetch = (fetch, url, options) =>\r\n  googleFetch(authGoogleContext, '1008335591690-9mgv2poc3vpi0ke1fi7c5m1dl2sejjru.apps.googleusercontent.com', fetch, url, options);\r\n*/\r\nexport const withGoogleLoginApi = withGoogleLogin();\r\n\r\nexport const getGoogleToken = () => googleGetToken();\r\nexport const getAdalToken = () => adalGetToken(authContext, adalConfig.endpoints.api);\r\n\r\nexport const getCachedGoogleUser = () => googleSecureCall(()=>window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile());\r\nexport const getCachedAdalUser = () => authContext.getCachedUser();\r\n\r\nexport const logOutGoogle = () => null;\r\nexport const logOutAdal = () => authContext.logOut();","import { createAction } from 'redux-actions';\r\n\r\nexport const requestUserInfo = createAction('user/info');\r\nexport const requestUserInfoFailed = createAction('user/infoFail');\r\nexport const requestUserInfoSuccess = createAction('user/infoSuccess');\r\n\r\n\r\nexport const setLoginType = createAction('user/loginType');\r\n\r\nexport const setSecReset = createAction('sec/reset');\r\n\r\nexport const signOut = createAction('sec/signOut');\r\n\r\nexport const globalErrors = createAction('global/errors');\r\nexport const globalErrorsClear = createAction('global/errorsClear');\r\n\r\nexport const getUserOrgs = createAction('user/getOrgs');\r\nexport const enableOrg = createAction('user/enableOrg');\r\nexport const enableOrgOk = createAction('user/enableOrgOk');\r\nexport const setUserOrgs = createAction('user/setOrgs');\r\nexport const selectOrg = createAction('user/selectOrg');\r\nexport const setUserOrgsFailed = createAction('user/setOrgsFailed');\r\n\r\nexport const saveApp = createAction('org/saveApp');\r\n\r\nexport const saveAppOk = createAction('org/saveAppOk');\r\nexport const saveAppFailed = createAction('org/saveAppFailed');\r\nexport const getApps = createAction('org/getApps');\r\nexport const getAppsOk = createAction('org/getAppsOk');\r\nexport const getAppsFailed = createAction('org/getAppsFailed');\r\n\r\n\r\nexport const setProperty = createAction('app/setProperty');\r\nexport const setOrgProperty = createAction('app/setOrgProperty');\r\n\r\n","import { handleActions } from 'redux-actions';\r\nimport * as actions from '../actions';\r\n\r\nconst defaultState = {\r\n    // Home page\r\n    loggedIn: false,\r\n    loginType: null,\r\n    user: null,\r\n    token: null\r\n    \r\n    \r\n\r\n};\r\n\r\nexport const reducer = handleActions({\r\n    [actions.setLoginType]: (state, action) => ({\r\n        ...state,\r\n        loginType:action.payload,\r\n        loginFailed : false,\r\n    }),\r\n   \r\n    [actions.requestUserInfoSuccess]: (state, action) => ({\r\n        ...state,\r\n        loggedIn: true,\r\n        user: action.payload,\r\n        loginFailed : false,\r\n        \r\n    }),\r\n\r\n    [actions.requestUserInfoFailed]: (state, action) => ({\r\n        ...state,\r\n        loggedIn: false,\r\n        user: null,\r\n        loginFailed:true\r\n        \r\n    }),\r\n\r\n    [actions.setSecReset]: (state, action) => ({\r\n        ...state,\r\n        loginType:'',\r\n        loggedIn: false,\r\n        user: null\r\n    }),\r\n\r\n}, defaultState);\r\n\r\nconst getData = state => state.app;\r\n\r\nconst getSec = state => state.sec;\r\n\r\nexport const loginType = state => getSec(state).loginType;\r\nexport const loggedIn = state => getSec(state).loggedIn;\r\nexport const user = state => getSec(state).user;\r\n","import { handleActions } from 'redux-actions';\r\nimport * as actions from '../actions';\r\nimport update from 'immutability-helper';\r\nimport _ from 'lodash';\r\n\r\nconst defaultState = {\r\n    test:'',\r\n    errors:[],\r\n\r\n    gettingUserOrgs:false,\r\n    userOrgs:[],\r\n    selectedOrg: null,\r\n    enablingOrg:false,\r\n    apps:null,\r\n    \r\n    orgAuthPolicy:null,\r\n    \r\n\r\n\r\n    \r\n    // Home page\r\n  \r\n    \r\n\r\n};\r\nconst defaultOrgState = {\r\n    \r\n    apps:null,\r\n    appPage:{org:null, apps:null}\r\n};\r\n\r\nexport const reducer = handleActions({\r\n    \r\n    [actions.requestUserInfoSuccess]: (state, action) => ({\r\n        ...state,\r\n        user: action.payload,\r\n        \r\n    }),\r\n\r\n    [actions.requestUserInfoFailed]: (state, action) => ({\r\n        ...state,\r\n        user: null,\r\n        userOrgs: []\r\n    }),\r\n\r\n    [actions.setSecReset]: (state, action) => ({\r\n        ...state,\r\n        user: null,\r\n        userOrgs:[]\r\n    }),\r\n\r\n    [actions.globalErrors]: (state, action) => ({\r\n        ...state,\r\n        errors:[...state.errors, action.payload],\r\n        \r\n    }),\r\n    [actions.globalErrorsClear]: (state, action) => ({\r\n        ...state,\r\n        errors:[],\r\n    }),\r\n    [actions.getUserOrgs]: (state, action) => ({\r\n        ...state,\r\n        gettingUserOrgs: true,\r\n    }),\r\n    [actions.setUserOrgs]: (state, action) => {\r\n        let res = {\r\n            ...state,\r\n            gettingUserOrgs: false,\r\n            userOrgs: action.payload,\r\n            selectedOrg: state.user ? _.find(action.payload, i => state.user.organizationKey === i.key) : null\r\n         };\r\n        if (res.selectedOrg){\r\n            res[res.selectedOrg.key] = state[res.selectedOrg.key]||{ ...defaultOrgState };\r\n        }\r\n        return res;\r\n\r\n    },\r\n    [actions.selectOrg]: (state, action) => ({\r\n        ...state,\r\n        selectedOrg: action.payload,\r\n        [action.payload.key]: state[action.payload.key] || { ...defaultOrgState }\r\n    }),\r\n    [actions.enableOrg]: (state, action) => {\r\n           return update(state, CreateUpdate(['enablingOrg',true] ));\r\n    },\r\n\r\n    [actions.enableOrgOk]: (state, action) => {\r\n        let orgIndex = _.findIndex(state.userOrgs, i => i.id === action.payload.id);\r\n        let updateOrgs = CreateUpdate(['userOrgs',orgIndex,'enabled',true],['selectedOrg','enabled',true],['userOrgs',orgIndex,'name',action.payload.name],['selectedOrg','uriKey',action.payload.uriKey],['enablingOrg',false]);\r\n        return update(state, updateOrgs);\r\n    },\r\n\r\n    [actions.setUserOrgsFailed]: (state, action) => ({\r\n        ...state,\r\n        gettingUserOrgs: false,\r\n        userOrgs: [],\r\n        selectedOrg:null\r\n    }),\r\n    [actions.getApps]: (state, action) => ({\r\n        ...state,\r\n        gettingApp: true,\r\n    }),\r\n    [actions.getAppsOk]: (state, action) => {\r\n        let updateApp = CreateUpdate([getOrg(state), 'apps',action.payload.apps],['gettingApp',false]);\r\n        return update(state, updateApp);\r\n    },\r\n\r\n    [actions.getAppsFailed]: (state, action) => ({\r\n        ...state,\r\n        gettingApp: false,\r\n    }),\r\n    [actions.saveAppOk]: (state, action) => {\r\n        let appIndex = _.findIndex(state.apps, i => i.id === action.payload.id);\r\n        if (appIndex >= 0){\r\n            let updateApp = CreateUpdate([getOrg(state), 'apps',appIndex,action.payload]);\r\n            return update(state, updateApp);\r\n        }\r\n        else {\r\n            let updateApp = CreateUpdate([getOrg(state), 'apps',[action.payload, ...state.apps]]);\r\n            return update(state, updateApp);\r\n          \r\n        // + delete\r\n      }\r\n    },\r\n\r\n      \r\n\r\n    [actions.setProperty]: (state, action) => (\r\n        // update(state, {'userOrgs':{[action.payload.index] : {[action.payload.property] : {$set:action.payload.value}}}})\r\n        update(state, action.payload)\r\n    ),\r\n    [actions.setOrgProperty]: (state, action) => (\r\n        update(state, { [getOrg(state)]: action.payload })\r\n    ),\r\n\r\n    \r\n\r\n}, defaultState);\r\n\r\nconst getOrg = state => state.selectedOrg ? state.selectedOrg.key : 'unknownOrg';\r\n\r\n\r\nconst getData = state => state.app;\r\nconst getDataInContextOfOrg = state => {\r\n    return state.app.selectedOrg ? state.app[state.app.selectedOrg.key] || {} : {} //empty if org is not set\r\n};\r\nexport const test = state => getData(state).test;\r\nexport const errors = state => getData(state).errors;\r\nexport const userOrgs = state => getData(state).userOrgs;\r\nexport const enablingOrg = state => getData(state).enablingOrg;\r\nexport const selectedOrg = state => getData(state).selectedOrg;\r\nexport const apps = state => getDataInContextOfOrg(state).apps;\r\nexport const groups = state => getDataInContextOfOrg(state).groups;\r\nexport const appPage = state => getDataInContextOfOrg(state).appPage;\r\n\r\nexport const CreateUpdate = (...args) =>{\r\n\r\n    \r\n    let res = {};\r\n  \r\n    for (let index = 0; index < args.length; index++) {\r\n        const element = args[index] ;\r\n        let tmp = res;\r\n        let tmp2 = null;\r\n\r\n        for (let i = 0; i < element.length; i++) {\r\n            if (i === element.length -2){\r\n                tmp[element[i]]={$set:element[i+1]};\r\n                break;\r\n            }\r\n            else{\r\n                tmp2 = tmp[element[i]] || {};\r\n                tmp[element[i]]=tmp2;\r\n            }\r\n            \r\n            tmp = tmp2;\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\r\nexport const CreateAdd = (...args) =>{\r\n\r\n    \r\n    let res = {};\r\n  \r\n    for (let index = 0; index < args.length; index++) {\r\n        const element = args[index] ;\r\n        let tmp = res;\r\n        let tmp2 = null;\r\n\r\n        for (let i = 0; i < element.length; i++) {\r\n            if (i === element.length -2){\r\n                tmp[element[i]]={$push:[element[i+1]]};\r\n                break;\r\n            }\r\n            else{\r\n                tmp2 = tmp[element[i]] || {};\r\n                tmp[element[i]]=tmp2;\r\n            }\r\n            \r\n            tmp = tmp2;\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\r\nexport const CreateRemove = (...args) =>{\r\n\r\n    \r\n    let res = {};\r\n  \r\n    for (let index = 0; index < args.length; index++) {\r\n        const element = args[index] ;\r\n        let tmp = res;\r\n        let tmp2 = null;\r\n\r\n        for (let i = 0; i < element.length; i++) {\r\n            if (i === element.length -2){\r\n                tmp[element[i]]={$splice:[[element[i+1],1]]};\r\n                break;\r\n            }\r\n            else{\r\n                tmp2 = tmp[element[i]] || {};\r\n                tmp[element[i]]=tmp2;\r\n            }\r\n            \r\n            tmp = tmp2;\r\n        }\r\n    }\r\n    return res;\r\n}\r\n/*export const loginType = state => getData(state).loginType;\r\nexport const loggedIn = state => getData(state).loggedIn;\r\nexport const user = state => getData(state).user;\r\nexport const token = state => getData(state).token;\r\nexport const secError = state => getData(state).secError;\r\n*/","import config from '../config.json';\r\n\r\nconst readCookie = (name) => {\r\n    var nameEQ = name + \"=\";\r\n    var ca = document.cookie.split(';');\r\n    console.log('cookies: ',ca);\r\n    for(var i=0;i < ca.length;i++) {\r\n        var c = ca[i];\r\n        while (c.charAt(0)==' ') c = c.substring(1,c.length);\r\n        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\r\n    }\r\n    return null;\r\n}\r\nexport  const apiRequest = async (url, params, noAuth) => {\r\n    let query = '';\r\n    params = params || [];\r\n    if (config.scheme) params.push({key:config.scheme, value:''});\r\n    if (params.length > 0)\r\n        query = '?';\r\n    let firstSet = true;\r\n    for (var i = 0; i < params.length; i++) {\r\n        if (params[i].value !== null) {\r\n            if (i > 0 && !firstSet)\r\n                query += '&';\r\n            firstSet = false;\r\n            query += params[i].key + '=' + encodeURIComponent(params[i].value);\r\n        }\r\n    }\r\n    return fetch(`${config.apiBase}${url}${query}`, {\r\n        method: \"GET\",\r\n        mode:'cors',\r\n        credentials: \"include\",\r\n        headers:  {\r\n            'Content-Type': 'application/json; charset=utf-8',\r\n            'token':readCookie('sign')\r\n          }, \r\n        })\r\n        .then(response => {\r\n            if (response.status === 401){\r\n                return {error:'NOAUTH'}\r\n            }\r\n            const contentType = response.headers.get(\"content-type\");\r\n            if (contentType && contentType.indexOf(\"application/json\") !== -1) {\r\n                if (response.status !== 200) {\r\n                        return response.json().then(data => data.error ? data : { error: data });\r\n                }\r\n                else return response.json();\r\n            }\r\n            else {\r\n                return response.text().then(data => { return { error: response.status + \": \" + (data ? data : response.statusText) } });\r\n            }           \r\n        })\r\n        .then(data => {\r\n            return data;\r\n        })\r\n        .catch(error => {\r\n            return { error: error };\r\n        });\r\n};\r\n\r\nexport const upload = async (url, params) => {\r\n    params = params || [];\r\n    if (config.scheme) params.push({key:config.scheme, value:''});\r\n    let data = new FormData()\r\n    if (params.length > 0)\r\n        {\r\n            \r\n            for (var i = 0; i < params.length; i++) {\r\n                if (params[i].value !== null) {\r\n                    data.append(params[i].key, params[i].value)\r\n                }\r\n        }\r\n    }\r\n    return fetch(`${config.apiBase}${url}`, {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers:  {\r\n            'token':readCookie('sign')\r\n          }, \r\n        body:data\r\n        })\r\n        .then(response => {\r\n            if (response.status === 401){\r\n                return {error:'NOAUTH'}\r\n            }\r\n    \r\n            const contentType = response.headers.get(\"content-type\");\r\n            if (contentType && contentType.indexOf(\"application/json\") !== -1) {\r\n                if (response.status !== 200) {\r\n                        return response.json().then(data => data.error ? data : { error: data });\r\n                }\r\n                else return response.json();\r\n            }\r\n            else {\r\n                return response.text().then(data => { return { error: response.status + \": \" + (data ? data : response.statusText) } });\r\n            }           \r\n        })\r\n        .then(data => {\r\n            return data;\r\n        })\r\n        .catch(error => {\r\n            return { error: error };\r\n        });\r\n};\r\n\r\n\r\nconst post = (url, body) => {\r\n    return fetch(config.apiBase+url, {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers:  {\r\n            'Content-Type': 'application/json; charset=utf-8',\r\n            'token':readCookie('sign')\r\n          }, \r\n        body: body ? JSON.stringify(body):null\r\n    })\r\n        .then(response => {\r\n            if (response.status === 401){\r\n                return {error:'NOAUTH'}\r\n            }\r\n    \r\n            const contentType = response.headers.get(\"content-type\");\r\n            if (contentType && contentType.indexOf(\"application/json\") !== -1) {\r\n                if (response.status !== 200) {\r\n                        return response.json().then(data => data.error ? data : { error: data });\r\n                }\r\n                else return response.json();\r\n            }\r\n            else {\r\n                return response.text().then(data => { return { error: response.status + \": \" + (data ? data : response.statusText) } });\r\n            }\r\n        })\r\n        .then(data => {\r\n            return data;\r\n        })\r\n        .catch(error => {\r\n            return { error: error };\r\n        });\r\n};\r\n\r\n\r\nexport const getUserInfo = (params) => {\r\n    return apiRequest('/api/v0/user/info', params);\r\n};\r\nexport const getUserOrgs = (params) => {\r\n    return apiRequest('/api/v0/user/organizations', params);\r\n};\r\nexport const enableOrg = (params) => {\r\n    return post('/api/v0/organization/register/'+params.id+'?orgName='+encodeURIComponent(params.name));\r\n};\r\n\r\nexport const saveApp = (orgUriKey, params) => {\r\n    return post(`/api/v0/organization/${orgUriKey}/app`, params);\r\n};\r\n\r\nexport const getApps = (orgUriKey) => {\r\n    return apiRequest(`/api/v0/organization/${orgUriKey}/apps`);\r\n};\r\nexport const getApp = (orgUriKey, appUriKey) => {\r\n    return apiRequest(`/api/v0/organization/${orgUriKey}/apps/${appUriKey}`);\r\n};\r\n\r\nexport const getVersions = (orgUriKey, appUriKey, slotId) => {\r\n    return apiRequest(`/api/v0/organization/${orgUriKey}/apps/${appUriKey}/${slotId}`);\r\n};\r\n\r\nexport const getOrgAuthPolicy = (orgUriKey) => {\r\n    return apiRequest(`/api/v0/organization/${orgUriKey}/policy`);\r\n};\r\nexport const getOrgAppPage = (orgUriKey) => {\r\n    return apiRequest(`/api/v0/organization/${orgUriKey}/app-page`);\r\n};\r\n\r\nexport const getOrgGroups = (orgUriKey) => {\r\n    return apiRequest(`/api/v0/organization/${orgUriKey}/groups`);\r\n};\r\nexport const getOrgAppGroups = (orgUriKey, appUriKey) => {\r\n    return apiRequest(`/api/v0/organization/${orgUriKey}/groups?appUriKey=${appUriKey}`);\r\n};\r\nexport const saveOrgAppGroup = (orgUriKey, appUriKey, group) => {\r\n    return post(`/api/v0/organization/${orgUriKey}/group?appUriKey=${appUriKey}`, group);\r\n};\r\nexport const saveOrgGroup = (orgUriKey, group) => {\r\n    return post(`/api/v0/organization/${orgUriKey}/group`, group);\r\n};\r\nexport const deleteOrgGroup = (orgUriKey, group) => {\r\n    return post(`/api/v0/organization/${orgUriKey}/group/delete/${group.id}`);\r\n};\r\nexport const deleteOrgAppGroup = (orgUriKey, appUriKey, group) => {\r\n    return post(`/api/v0/organization/${orgUriKey}/group/delete?appUriKey=${appUriKey}`, group);\r\n};\r\n\r\nexport const addUserToGroup = (orgUriKey, userId, groupId) => {\r\n    return post(`/api/v0/organization/${orgUriKey}/user/${userId}/${groupId}`,{});\r\n};\r\n\r\nexport const removeUser = (orgUriKey, user, groupId) => {\r\n    return post(`/api/v0/organization/${orgUriKey}/user/remove/${user.id}?groupId=${groupId}`);\r\n};\r\n\r\nexport const getUsers = (orgUriKey, groupId, filter, take, skip) => {\r\n    return apiRequest(`/api/v0/organization/${orgUriKey}/users?take=${take}&skip=${skip}&groupId=${groupId}&filter=${encodeURIComponent(filter || '')}`);\r\n};\r\n\r\n\r\nexport const logOut = () => {\r\n    return apiRequest('/account/signout', null);\r\n};\r\n\r\n\r\nexport const saveTest = (data) => {\r\n    return post('/api/test', data);\r\n};\r\n\r\nexport const saveVersion = (orgUriKey, appUriKey, slotName, newVersion) => {\r\n    return upload(`/api/v0/organization/${orgUriKey}/apps/${appUriKey}/${slotName}`, [\r\n        {key:'version', value:newVersion.version},\r\n        {key:'bundleChoice', value:newVersion.bundleChoice},\r\n        {key:'iconChoice', value:newVersion.iconChoice},\r\n        {key:'bundle', value:newVersion.bundle},\r\n        {key:'icon', value:newVersion.icon},\r\n        {key:'redirect', value:newVersion.redirect},\r\n        {key:'useRedirect', value:newVersion.useRedirect},\r\n    ]);\r\n};\r\n\r\n","import * as actions from '../actions';\r\nimport * as reducer from '../reducers/Sec';\r\nimport * as appReducer from '../reducers/App';\r\nimport { connect } from 'react-redux';\r\nimport * as api from '../services/api';\r\nimport React, { Component} from 'react';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport { Glyphicon, Nav, Navbar, NavItem,Col, Row, NavDropdown, MenuItem } from 'react-bootstrap';\r\nimport { LinkContainer,Alert } from 'react-router-bootstrap';\r\nimport { Route, Redirect,Switch, withRouter } from \"react-router-dom\";\r\nimport config from '../config.json';\r\nimport { push } from \"react-router-redux\";\r\nimport { Menu, Segment, Sticky, Grid, GridColumn, Header as H, Dropdown, Icon } from 'semantic-ui-react'\r\n//import './Header.css';\r\n\r\n\r\nclass NavWrap extends Component {\r\n   \r\n    render() {\r\n      const {\r\n        active,\r\n        activeKey,\r\n        activeHref,\r\n        onSelect,\r\n  \r\n        children,\r\n  \r\n        ...otherProps\r\n      } = this.props;\r\n      return (<li role=\"presentation\" {...otherProps}>\r\n        {children}\r\n      </li>);\r\n    }\r\n}\r\nclass Header extends Component{\r\n  state = {}\r\n\r\n  handleContextRef = contextRef => this.setState({ contextRef })\r\n\r\n  componentDidMount() {\r\n  \r\n  }\r\n\r\n  componentWillUpdate(nextProps) {\r\n\r\n    console.log(nextProps);\r\n\r\n  }\r\n\r\n  render(){ \r\n    const { contextRef } = this.state\r\n\r\n    return (\r\n      <Sticky context={contextRef}>\r\n      <Grid columns={1}>\r\n     \r\n      <Grid.Column width={16}>\r\n        \r\n        \r\n        <Menu pointing secondary stackable style={{backgroundColor:'white', paddingLeft:'16px'}}>\r\n          <Menu.Item><Link className=\"brand\" to={'/'}><svg width=\"24\" height=\"24\" viewBox=\"0 0 256 256\" xmlns=\"http://www.w3.org/2000/svg\">\r\n \r\n <g>\r\n  <title>background</title>\r\n  <rect fill=\"#fff\" id=\"canvas_background\" height=\"258\" width=\"258\" y=\"-1\" x=\"-1\"/>\r\n  <g display=\"none\" overflow=\"visible\" y=\"0\" x=\"0\" height=\"100%\" width=\"100%\" id=\"canvasGrid\">\r\n   <rect fill=\"url(#gridpattern)\" stroke-width=\"0\" y=\"0\" x=\"0\" height=\"100%\" width=\"100%\"/>\r\n  </g>\r\n </g>\r\n <g>\r\n  <title>Layer 1</title>\r\n  <path id=\"svg_1\" d=\"m36.215318,186.424673l187.331697,0.07062l-6.078957,8.871002l-175.102011,-0.211852l-6.150737,-8.72977l0.000008,0zm1.287364,-118.004435l184.828484,-0.211852l5.363929,9.100292l-195.627945,0.07062l5.435532,-8.959061zm-18.240314,59.130432l221.165978,-0.211852l-0.285883,9.1003l-220.737057,-0.141232l-0.143038,-8.747217zm221.349059,0.844047c0,60.246119 -49.646813,109.256949 -110.681021,109.256949c-61.00784,0 -110.6454,-49.019689 -110.6454,-109.256949c0,-60.237554 49.646532,-109.248376 110.6454,-109.248376c61.034217,-0.00885 110.681021,49.010822 110.681021,109.248376zm-110.672331,-118.004443c-65.877825,0 -119.486531,52.931836 -119.486531,117.995569c0,65.0726 53.608714,118.004428 119.486531,118.004428c65.913695,0 119.513454,-52.931828 119.513454,-118.004428c0,-65.063734 -53.599751,-117.995569 -119.513454,-117.995569zm33.531273,118.004443c0,64.377993 -17.664889,109.256949 -33.531273,109.256949c-15.848434,0 -33.513042,-44.878956 -33.513042,-109.256949c0,-64.395717 17.655901,-109.248376 33.513042,-109.248376c15.857429,-0.00885 33.531273,44.852659 33.531273,109.248376zm-33.531273,-118.004443c-27.520862,0 -42.372116,60.799874 -42.372116,117.995569c0,57.213158 14.851254,118.004428 42.372116,118.004428c27.521143,0 42.399311,-60.800112 42.399311,-118.004428c-0.008971,-57.195695 -14.878168,-117.995569 -42.399311,-117.995569zm78.530084,118.004443c0,60.246119 -35.240633,109.256949 -78.530084,109.256949c-43.280456,0 -78.503162,-49.019689 -78.503162,-109.256949c0,-60.237554 35.222706,-109.248376 78.503162,-109.248376c43.289451,-0.00885 78.530084,49.010822 78.530084,109.248376zm-78.530084,-118.004443c-48.159693,0 -87.362228,52.931836 -87.362228,117.995569c0,65.0726 39.202535,118.004428 87.362228,118.004428c48.177636,0 87.371472,-52.931828 87.371472,-118.004428c0,-65.063734 -39.193836,-117.995569 -87.371472,-117.995569z\" stroke=\"#000\" fill=\"#00acfc\"/>\r\n </g>\r\n</svg>Not Appstore</Link></Menu.Item>\r\n        \r\n          <Menu.Item as={NavLink} to='/' exact content=\"Home\" />\r\n          <Menu.Item as={NavLink} to='/pricing' content=\"Pricing\" />\r\n          <Menu.Item as={NavLink} to='/about' content=\"About the service\" />\r\n          {this.props.user && this.props.selectedOrg !== null ?([\r\n          <Dropdown className='right' item icon=\"users\" text={this.props.selectedOrg.name}>\r\n            <Dropdown.Menu>\r\n              <Dropdown.Header>Organizations</Dropdown.Header>\r\n              {this.props.userOrgs.map((i) =><Menu.Item onClick={()=>this.props.selectOrg(i)}>{i.name}</Menu.Item>)}\r\n            </Dropdown.Menu>\r\n          </Dropdown>,\r\n         \r\n          <Dropdown item icon=\"setting\" text={this.props.user.name}>\r\n            <Dropdown.Menu>\r\n              <Dropdown.Header>Account options</Dropdown.Header>\r\n              <Dropdown.Item>Sign out</Dropdown.Item>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n          ]):null}\r\n        </Menu>                      \r\n        \r\n                            \r\n      </Grid.Column>\r\n      \r\n      \r\n      </Grid>\r\n      </Sticky>\r\n /*  <Navbar fixedTop fluid collapseOnSelect>\r\n    <Navbar.Header>\r\n            <Navbar.Brand>\r\n                    <Row>\r\n                        <Col xs={5}>\r\n                            Logo\r\n                            \r\n                        </Col>\r\n                        <Col xs={7}>\r\n                            <Link className=\"brand\" to={'/'}>Name</Link>\r\n                            \r\n                        </Col>\r\n                    </Row>\r\n                \r\n      </Navbar.Brand>\r\n      <Navbar.Toggle />\r\n    </Navbar.Header>\r\n    <Navbar.Collapse>\r\n      <Nav>\r\n        <LinkContainer to={'/'} exact>\r\n          <NavItem>\r\n            Home\r\n          </NavItem>\r\n        </LinkContainer>\r\n        <LinkContainer to={'/pricing'} exact>\r\n          <NavItem>\r\n            Pricing\r\n          </NavItem>\r\n        </LinkContainer>\r\n        <LinkContainer to={'/about'} exact>\r\n          <NavItem>\r\n            Why this service\r\n          </NavItem>\r\n        </LinkContainer>\r\n       \r\n            </Nav>\r\n           \r\n            <Nav pullRight>\r\n\r\n            <NavDropdown id={'user-menu'} noCaret title={(\r\n                this.props.user ? (\r\n                  <div className=\"user-info\">\r\n                      {this.props.user.thumb ?<div> <img style={{height:'35px', paddingRight:'10px'}} srcSet={this.props.user.thumb} /> {this.props.user.name}</div>: <div> <Glyphicon style={{paddingRight:'10px'}} pullright=\"true\" glyph='user' /> {this.props.user.name}</div>}\r\n                  </div>\r\n                  ) \r\n                  : ''\r\n               )}>\r\n                <MenuItem onClick={()=>this.props.signOut()}>Sign out</MenuItem>\r\n              </NavDropdown>\r\n            </Nav>\r\n\r\n             <Nav pullRight>\r\n\r\n          <NavDropdown style={{paddingRight:'20px'}} id={`dropdown-org`} title={(\r\n              (this.props.user && this.props.selectedOrg !== null) ? (\r\n                \r\n                    this.props.selectedOrg.name\r\n                \r\n                ) \r\n                : ''\r\n            )}>\r\n              {this.props.userOrgs.map((i) =>i.key !== this.props.selectedOrg.key ? <MenuItem onClick={()=>this.props.setProperty(appReducer.CreateUpdate(['selectedOrg', i]))}>{i.name}</MenuItem> :null)}\r\n              \r\n          </NavDropdown>\r\n            </Nav>\r\n    </Navbar.Collapse>\r\n              </Navbar>*/)\r\n    \r\n  }\r\n}\r\nconst mapStateToProps = (state) => ({\r\n  user : reducer.user(state),\r\n  loggedIn : reducer.loggedIn(state),\r\n  userOrgs: appReducer.userOrgs(state),\r\n  selectedOrg: appReducer.selectedOrg(state)\r\n  \r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  'signOut': (value) => dispatch(actions.signOut()),\r\n  'setProperty': (v) => dispatch(actions.setProperty(v)),\r\n  'selectOrg':(v)=> dispatch(actions.selectOrg(v))\r\n\r\n \r\n});\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Header));\r\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport logo from '../logo.svg';\nimport './App.css';\nimport * as api from '../services/api';\nimport config from '../config.json';\n\nimport * as actions from '../actions';\nimport * as reducer from '../reducers/Sec';\nimport { Button, Segment, Sticky, Grid, GridColumn, Header as H, Dropdown, Icon } from 'semantic-ui-react'\n\n\n\nclass App extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n    };\n}\n  componentDidMount() {\n    console.log(\"init:\",this.props);\n    this.props.requestUserInfo();\n  \n  }\n\n  componentWillUpdate(nextProps) {\n\n    console.log(\"app:\",nextProps);\n\n  }\n\n  render() {\n    return (\n            <div>\n              <Button basic color='black' href={config.apiBase + \"/account/azure?redirect=\"+window.location.href}>\n                <Icon>\n                  <svg style={{marginBottom:'-1px'}} xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 21 21\"><title>MS-SymbolLockup</title><rect x=\"1\" y=\"1\" width=\"9\" height=\"9\" fill=\"#f25022\"/><rect x=\"1\" y=\"11\" width=\"9\" height=\"9\" fill=\"#00a4ef\"/><rect x=\"11\" y=\"1\" width=\"9\" height=\"9\" fill=\"#7fba00\"/><rect x=\"11\" y=\"11\" width=\"9\" height=\"9\" fill=\"#ffb900\"/></svg>\n                </Icon>\n                  Sign in with Azure/Live\n                </Button>\n              <Button basic color='black' href={config.apiBase + \"/account/google?redirect=\"+window.location.href}> <Icon name='google plus' />Sign in with Google</Button>\n          </div>)\n    \n  }\n}\n\nconst mapStateToProps = (state) => ({\n  loginType : reducer.loginType(state),\n  user : reducer.user(state)\n  \n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  'setLoginType': (value) => dispatch(actions.setLoginType(value)),\n  'requestUserInfo': (value) => dispatch(actions.requestUserInfo()),\n  \n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n\n","import * as React from 'react';\r\nimport { Component } from 'react';\r\nimport { Button, ButtonProps, Label } from 'semantic-ui-react';\r\nimport * as uuid from 'uuid';\r\n\r\n\r\nclass FileButton extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.id = uuid.v1();\r\n        this.onChangeFile = this.onChangeFile.bind(this);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Button\r\n                    {...this.props}\r\n                    as=\"label\"\r\n                    htmlFor={this.id} />\r\n                <input\r\n                    style={{display:'none'}}\r\n                    id={this.id}\r\n                    multiple\r\n                    type=\"file\"\r\n                    onChange={this.onChangeFile} />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    onChangeFile() {\r\n        const fileButton = document.getElementById(this.id);\r\n        const file = fileButton ? fileButton.files[0] : null;\r\n        if (this.props.onSelect) {\r\n            this.props.onSelect(file);\r\n        }\r\n    }\r\n}\r\n\r\nexport default FileButton;","import { connect } from 'react-redux';\r\nimport React, { Component } from 'react';\r\nimport logo from '../logo.svg';\r\nimport './App.css';\r\nimport * as api from '../services/api';\r\nimport config from '../config.json';\r\nimport * as actions from '../actions';\r\nimport * as reducer from '../reducers/Sec';\r\nimport * as appReducer from '../reducers/App';\r\nimport { Link} from \"react-router-dom\";\r\nimport FileButton from './sub/FileButton';\r\nimport { Button, Segment, Grid, Radio, Header, Loader, Icon, Form, Label, Input, Divider } from 'semantic-ui-react';\r\nimport update from 'immutability-helper';\r\nimport Dropzone from 'react-dropzone'\r\n\r\n\r\nimport ReactIframeResizer from 'react-iframe-resizer-super';\r\n\r\nconst iframeResizerOptions = { checkOrigin: false };\r\nclass AppDef extends Component {\r\n    constructor(props, context) {\r\n        super(props, context);\r\n    \r\n        this.state = {\r\n        };\r\n    }\r\n\r\n   componentDidMount() {\r\n    this.setState({appUriKey:this.props.match.params.appUriKey,loading:true},()=>this.loadApp());\r\n    //this.loadApp();\r\n\r\n    \r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (!this.state.loading && this.props.match.params.appUriKey !== prevProps.match.params.appUriKey){\r\n        this.setState({loading:true}, ()=> this.loadApp());\r\n    }\r\n  }\r\n\r\n  loadApp(){\r\n    if (!this.state.app || (this.props.selectedOrg && this.state.appUriKey)){\r\n      this.setState({loading:true}, async ()=>\r\n      \r\n          {let app = await api.getApp(this.props.selectedOrg.uriKey, this.state.appUriKey)\r\n      \r\n          if (app.error){ \r\n              console.log('error:: ', app.error);\r\n          }\r\n          else{\r\n              this.setState({app:app});\r\n          }\r\n          this.setState({loading:false});\r\n    });\r\n      \r\n    }\r\n  }\r\n\r\n  loadVersions(slot){\r\n    \r\n      this.setState({loadingVersions:true}, async ()=>\r\n      {\r\n      try\r\n      {\r\n            {\r\n              let versions = await api.getVersions(this.props.selectedOrg.uriKey, this.state.appUriKey, slot.name)\r\n        \r\n            if (versions.error){ \r\n                console.log('error:: ', versions.error);\r\n            }\r\n            else{\r\n                this.setState({versions:{slot:slot.name, versions:versions }});\r\n            }\r\n          }\r\n      }\r\n      finally{\r\n        this.setState({loadingVersions:false});\r\n      }\r\n    }\r\n    );\r\n      \r\n  }\r\n\r\n  \r\n\r\nhandleIconChoiceChange = (e, { value }) => {\r\nconsole.log('update',update, 'state:',this.state,'value:', value, 'this.setState:', this.setState)\r\nlet u = update(this.state, appReducer.CreateUpdate(['versionToSave','iconChoice',value]));\r\nconsole.log(u);    \r\nthis.setState(u);\r\n}\r\n\r\nhandleBundleChange = (e, { value }) => {\r\n  this.setState(update(this.state, appReducer.CreateUpdate(['versionToSave','bundleChoice',value])));\r\n\r\n}\r\n renderBundleChoice(){\r\n   switch(this.state.versionToSave.bundleChoice){\r\n     case \"redirect\": return  (<div class=\"field\">\r\n     <label>Redirect</label>\r\n     <Input type=\"text\" value={this.state.versionToSave.redirect} onChange={(e)=>this.setState(update(this.state, appReducer.CreateUpdate(['versionToSave','redirect',e.target.value])))} name=\"redirect\" placeholder=\"http://my-webpage.com\"/>\r\n   </div>)\r\n     case \"upload\": return  (<div class=\"field\" style={{borderStyle:'dashed', borderWidth:1, padding:'8px'}}>\r\n                      <label>Bundle <i style={{marginLeft:'8px',color:'#aaa'}}>a zipped bundle must at least contain an index.html-file at the root</i></label>\r\n                      <Dropzone multible={false}\r\n                          onDrop={files => {if (files.length === 1) this.setState(update(this.state, appReducer.CreateUpdate(['versionToSave','bundle',files[0]])))}}\r\n                          disableClick accept=\".zip\"\r\n                        >\r\n                          {({getRootProps, getInputProps, open}) => (\r\n                            <div {...getRootProps()}>\r\n                              <input {...getInputProps()} />\r\n                                <p>Drop .zip file here</p>\r\n                        \r\n                                <Button basic type=\"button\" onClick={() => open()}>\r\n                                  {this.state.versionToSave.bundle? this.state.versionToSave.bundle.name : 'Choose file'}\r\n                                </Button>\r\n                            </div>\r\n                          )}\r\n                        </Dropzone>\r\n                  </div>)\r\n      default:return null;\r\n   }\r\n}\r\n \r\nrenderIconChoice(){\r\n  switch(this.state.versionToSave.iconChoice){\r\n    case \"relative\": return  (<div class=\"field\">\r\n                       <label>Relative path</label>\r\n                       <Input type=\"text\" name=\"path\" value={this.state.versionToSave.iconPath} onChange={(e)=>this.setState(update(this.state, appReducer.CreateUpdate(['versionToSave','iconPath',e.target.value])))} placeholder=\"/resources/logo.svg\"/>\r\n                   </div>)\r\n    case \"static\": return  (<div class=\"field\">\r\n                     <label>Url to icon</label>\r\n                     <Input type=\"text\" name=\"path\" value={this.state.versionToSave.iconPath} onChange={(e)=>this.setState(update(this.state, appReducer.CreateUpdate(['versionToSave','iconPath',e.target.value])))} placeholder=\"http://your-resource-server.com/logo.svg\"/>\r\n                 </div>)\r\n     case \"upload\":return  (<div class=\"field\" style={{borderStyle:'dashed', borderWidth:1, padding:'8px'}}>\r\n                 <label>Upload .svg or .png <i style={{marginLeft:'8px',color:'#aaa'}}>we recommend .svg for best results</i></label>\r\n                 <Dropzone multible={false}\r\n                          onDrop={files => {if (files.length === 1) this.setState(update(this.state, appReducer.CreateUpdate(['versionToSave','icon',files[0]])))}}\r\n                          disableClick accept=\".svg,.png\"\r\n                        >\r\n                          {({getRootProps, getInputProps, open}) => (\r\n                            <div {...getRootProps()}>\r\n                              <input {...getInputProps()} />\r\n                                <p>Drop .svg or .png file here</p>\r\n                        \r\n                                <Button basic type=\"button\" onClick={() => open()}>\r\n                                  {this.state.versionToSave.icon? this.state.versionToSave.icon.name : 'Choose file'}\r\n                                </Button>\r\n                            </div>\r\n                          )}\r\n                        </Dropzone>\r\n             </div>)\r\n     default:return null;\r\n  }\r\n}\r\n\r\n  canBeSaved(version){\r\n    return (\r\n      (version.iconChoice === 'upload' && version.icon) || \r\n      ((version.iconChoice=== \"redirect\" || version.iconChoice=== \"static\") && version.iconPath)  &&\r\n      (version.redirect  || version.bundle) &&\r\n      version.version\r\n    )\r\n  }\r\n  renderNewVersion(slot){\r\n    return (this.state.newVersion && slot ?(<div>\r\n      <Header>New version</Header>\r\n      <form class=\"ui form\">\r\n        <div class=\"field\">\r\n          <label>Version</label>\r\n          <Input type=\"text\" value={this.state.versionToSave.version} onChange={(e)=>this.setState(update(this.state, appReducer.CreateUpdate(['versionToSave','version',e.target.value])))} name=\"version\" placeholder=\"1.0.0\"/>\r\n        </div>\r\n        <div class=\"field\">\r\n        <label>Bundle</label>\r\n        <div class=\"two fields\">\r\n       \r\n          \r\n        <Form.Field>\r\n          <Radio\r\n            label='Upload bundle'\r\n            name='bundle'\r\n            value='upload'\r\n            checked={this.state.versionToSave.bundleChoice === 'upload'}\r\n            onChange={this.handleBundleChange}\r\n          />\r\n          </Form.Field>\r\n          <Form.Field>\r\n          <Radio\r\n            label='Redirect to another web page'\r\n            name='bundle'\r\n            value='redirect'\r\n            checked={this.state.versionToSave.bundleChoice === 'redirect'}\r\n            onChange={this.handleBundleChange}\r\n          />\r\n        </Form.Field>\r\n          </div>\r\n          {this.renderBundleChoice()}\r\n        \r\n       </div> \r\n      \r\n        <div class=\"field\">\r\n        <label>Icon</label>\r\n        <div class=\"two fields\">\r\n       \r\n        <Form.Field>\r\n          <Radio\r\n            label='Use icon from package'\r\n            name='radioGroup'\r\n            value='relative'\r\n            checked={this.state.versionToSave.iconChoice === 'relative'}\r\n            onChange={this.handleIconChoiceChange}\r\n          />\r\n        </Form.Field>\r\n        <Form.Field>\r\n          <Radio\r\n            label='Use icon from other resource'\r\n            name='radioGroup'\r\n            value='static'\r\n            checked={this.state.versionToSave.iconChoice === 'static'}\r\n            onChange={this.handleIconChoiceChange}\r\n          />\r\n        </Form.Field>\r\n        <Form.Field>\r\n          <Radio\r\n            label='Upload new icon'\r\n            name='radioGroup'\r\n            value='upload'\r\n            checked={this.state.versionToSave.iconChoice === 'upload'}\r\n            onChange={this.handleIconChoiceChange}\r\n          />\r\n        </Form.Field>\r\n        <Form.Field>\r\n          <Radio\r\n            label='Use icon from last version'\r\n            name='radioGroup'\r\n            value='last'\r\n            checked={this.state.versionToSave.iconChoice === 'last'}\r\n            onChange={this.handleIconChoiceChange}\r\n          />\r\n        </Form.Field>\r\n\r\n       </div>\r\n       {this.renderIconChoice()}\r\n       </div>\r\n       \r\n        \r\n          \r\n        \r\n        <Button disabled={!this.canBeSaved(this.state.versionToSave)} loading={this.state.saving} onClick={(e)=>{e.preventDefault(); console.log('saving',this.state.versionToSave); this.saveNewVersion(slot)}} basic color=\"black\">Save</Button>\r\n        <Button onClick={()=>this.setState({newVersion:false})} basic color=\"black\">Cancel</Button>\r\n    \r\n    </form>\r\n      </div>): \r\n    <Button onClick={()=>this.setState({newVersion:true, versionToSave:{iconChoice:'upload', bundleChoice:'upload'}})} basic color=\"black\">New Version</Button>)\r\n  }\r\n\r\n  async saveNewVersion(slot){\r\n    this.setState({saving:true});\r\n    try{\r\n      let res = await api.saveVersion(this.props.selectedOrg.uriKey, this.state.appUriKey, slot, this.state.versionToSave);\r\n      if (res && !res.error){\r\n        if (slot === 'Production')\r\n        {\r\n          await this.loadApp(slot)\r\n\r\n        }\r\n        await this.loadVersions(slot);\r\n      }\r\n    }\r\n    finally{\r\n      this.setState({saving:false});\r\n    \r\n    }\r\n  }\r\n  renderVersions(){\r\n    const versions = this.state.versions;\r\n    return (\r\n        this.state.loadingVersions ? <Loader/> : (\r\n        versions ? (\r\n          <div style={{marginTop:'24px'}}>\r\n            <Header>{versions.slot}</Header>\r\n            {this.renderNewVersion(versions.slot)}\r\n            \r\n\r\n              {versions.versions.map((v, i)=><Button>{v.name}</Button>)}\r\n          </div>\r\n          )  :null\r\n        )\r\n      )\r\n  }\r\n\r\n  renderSlots(){\r\n    const slots = this.state.app.slots;\r\n    return (\r\n      <div>\r\n        <Header style={{marginTop:'24px'}}>Slots</Header>\r\n        {slots.map((s, i) => <Button onClick={()=>this.loadVersions(s)} basic style={{lineHeight:'1.6'}}>{s.name}<br/><span><i>{s.latestVersion == null ?'Non deployed':'v.'+s.latestVersion}</i></span></Button>)}\r\n      </div>\r\n    )\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        {this.state.app? (<div><h3>{this.state.app.name}</h3>\r\n        {this.state.loading ? null : (\r\n          <ReactIframeResizer style={{height:'128px', width:'128px'}} iframeResizerOptions={iframeResizerOptions}>\r\n            \r\n              <img width={100} height={100}  style={{marginLeft:'-0px' ,marginRight:'-0px'}} src={`${config.apiBase}/api/v0/Organization/${this.props.selectedOrg.uriKey}/apps/${this.state.app.uriKey}/icon`}/>\r\n            \r\n          </ReactIframeResizer>\r\n        )}\r\n        {this.renderSlots()}\r\n        {this.renderVersions()}\r\n        </div>) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n selectedOrg: appReducer.selectedOrg(state),\r\n\r\n  \r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n // 'setLoginType': (value) => dispatch(actions.setLoginType(value)),\r\n  \r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AppDef);\r\n\r\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport { Menu, Segment, Sticky, Grid, GridColumn, Header, Dropdown, Icon } from 'semantic-ui-react';\n\n\n\nclass Pricing extends Component {\n  state = {\n    response: ''\n  };\n\n  componentDidMount() {\n    \n  \n  }\n\n  componentWillUpdate(nextProps) {\n\n   \n  }\n\n  \n \n  render() {\n    return (\n  \n          <Header>Pricing</Header>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n /* loginType : reducer.loginType(state),\n  loggedIn : reducer.loggedIn(state),\n  secError : reducer.secError(state),\n  token : reducer.token(state)*/\n  \n});\n\nconst mapDispatchToProps = (dispatch) => ({\n/*  'setSecAzure': (value) => dispatch(actions.setSecAzure(value)),\n  'setSecGoogle': (value) => dispatch(actions.setSecGoogle(value)),\n  'setSecReset': (value) => dispatch(actions.setSecReset(value)),\n  'setSecGoogleSuccess':(value) => dispatch(actions.setSecGoogleSuccess(value)),*/\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Pricing);\n\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport {Header} from 'semantic-ui-react'\n\nclass About extends Component {\n  state = {\n    response: ''\n  };\n\n  componentDidMount() {\n    \n  \n  }\n\n  componentWillUpdate(nextProps) {\n\n   \n  }\n\n  \n \n  render() {\n    return (\n      <Header>Use this service because</Header>\n   \n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n /* loginType : reducer.loginType(state),\n  loggedIn : reducer.loggedIn(state),\n  secError : reducer.secError(state),\n  token : reducer.token(state)*/\n  \n});\n\nconst mapDispatchToProps = (dispatch) => ({\n/*  'setSecAzure': (value) => dispatch(actions.setSecAzure(value)),\n  'setSecGoogle': (value) => dispatch(actions.setSecGoogle(value)),\n  'setSecReset': (value) => dispatch(actions.setSecReset(value)),\n  'setSecGoogleSuccess':(value) => dispatch(actions.setSecGoogleSuccess(value)),*/\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(About);\n\n","import React, { Component } from \"react\";\r\nimport config from '../../config.json';\r\nimport ReactIframeResizer from 'react-iframe-resizer-super';\r\n\r\nconst iframeResizerOptions = { checkOrigin: false };\r\n\r\nexport default class AppIcon extends Component {\r\n\r\n    shouldComponentUpdate(nextProps) {\r\n        const {appInfo } = this.props;\r\n       \r\n        if(nextProps.appInfo && nextProps.appInfo.updated != appInfo.updated) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    render()\r\n    {\r\n        const { appInfo, selectedOrg } = this.props;\r\n    \r\n\r\n        return(<div> \r\n        <div style={{height:'64px', width:'64px',position:'absolute'}}></div>\r\n        <ReactIframeResizer style={{height:'64px', width:'64px'}} iframeResizerOptions={iframeResizerOptions}>\r\n          \r\n            <img width={50} height={50}  style={{marginLeft:'-0px' ,marginRight:'-0px'}} src={`${config.apiBase}/api/v0/Organization/${selectedOrg.uriKey}/apps/${appInfo.uriKey}/icon`}/>\r\n          \r\n        </ReactIframeResizer>\r\n        <span style={{ fontWeight:'bold', padding:'4px', borderRadius:'8px'}}>{appInfo.name}</span>\r\n        </div>)\r\n    }\r\n}","import * as React from 'react';\r\nimport { Component } from 'react';\r\nimport { Button as BaseButton, ButtonProps, Label as BaseLabel,Icon, Form, Input as BaseInput } from 'semantic-ui-react';\r\nimport { Link, NavLink, Redirect,Switch, withRouter } from \"react-router-dom\";  \r\nimport * as uuid from 'uuid';\r\nimport AppIcon from './AppIcon';\r\nexport class Button extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n    }\r\n\r\n    render() {\r\n        const {onClick, text, icon, loading} = this.props;\r\n        return (\r\n          <BaseButton style={{width:'160px'}} loading={loading} basic color=\"black\" icon onClick={onClick}>\r\n            <Icon name={icon}></Icon>{text}\r\n          </BaseButton>      );\r\n    }\r\n    \r\n}\r\n\r\nexport class Input extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n    }\r\n\r\n    render() {\r\n        const {onChange, text, placeholder, value, label} = this.props;\r\n        return (\r\n            <Form.Field>\r\n            <BaseLabel basic pointing=\"below\">{text}</BaseLabel>\r\n            <BaseInput label={label} type='text'  defaultValue={value}\r\n                  placeholder={placeholder}\r\n                  id={null}\r\n                  autoComplete={\"nope\"}\r\n                  onChange={onChange} />\r\n             </Form.Field>)\r\n    }\r\n    \r\n}\r\n\r\nexport class AppNavButton extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n    }\r\n\r\n    render() {\r\n        const {to, selectedOrg, appInfo} = this.props;\r\n        return (\r\n            <BaseButton basic style={{height:'64px', width:'64px', padding:0}} as={NavLink} to={to}>\r\n            <AppIcon selectedOrg={selectedOrg} appInfo={appInfo}></AppIcon>\r\n          </BaseButton>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\n\r\n","import { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport logo from '../logo.svg';\nimport './App.css';\nimport * as api from '../services/api';\nimport config from '../config.json';\nimport * as actions from '../actions';\nimport * as reducer from '../reducers/Sec';\nimport * as appReducer from '../reducers/App';\nimport { Segment, Grid, GridColumn, Header, Dropdown, Icon, Form, Label,  Divider } from 'semantic-ui-react'\nimport {Button, Input, AppNavButton} from './sub/Components';\nimport { Link, NavLink, Redirect,Switch, withRouter } from \"react-router-dom\";\nimport Iframe from 'react-iframe';\nimport AppIcon from './sub/AppIcon';\n\n\n\nclass Main extends Component {\n  state = {\n    response: ''\n  };\n\n  componentDidMount() {\n    console.log(\"init:\",this.props);\n    if ((!this.props.apps || !this.props.apps.map)) {\n      this.props.getApps();\n      this.loadGroups();\n    }\n    \n  }\n\n  componentWillUpdate(nextProps) {\n    if ( (this.props.selectedOrg && nextProps.selectedOrg) && ((this.props.selectedOrg.id != nextProps.selectedOrg.id) || (this.props.selectedOrg.enabled != nextProps.selectedOrg.enabled))){\n      this.props.getApps();\n      this.loadGroups();\n    }\n    console.log('Main: ',nextProps);\n\n  }\n\n  async saveApp(app, index){\n    this.props.setOrgProperty(appReducer.CreateUpdate(['apps',index,'saving',true],['apps',index,'error',null]));\n    let res = app;\n    try{\n      res = await api.saveApp(this.props.selectedOrg.uriKey, app);\n      if (res.error){\n        this.props.setOrgProperty(appReducer.CreateUpdate(['apps',index,'saving',false,],['apps',index,'error',res.error]));\n      }\n      else{\n        this.props.setOrgProperty(appReducer.CreateUpdate(['apps',index,'saving',false,],['apps',index,res]));\n      }\n    }\n    finally{\n      this.props.setOrgProperty(appReducer.CreateUpdate(['apps',index,'saving',true]));\n    }\n  }\n\n  init(org){\n     return (\n      <Form>\n      <Form.Field>\n        <Input value={org.name}\n              placeholder=\"Organization name\"\n             text=\"Your organization is unknown to us. Please enter the correct name of this organization\"\n             onChange={e => this.props.setProperty(appReducer.CreateUpdate(['selectedOrg','name', e.target.value]))}/>\n      </Form.Field>\n      <Button onClick={() => this.props.enablingOrg ? null : this.props.enableOrg(org)} loading={this.props.enablingOrg} text={this.props.enablingOrg ? 'Enabling':'Ok'}/>\n    </Form>\n)\n  }\n\n  \n  firstUser(org){\n    // Wait until we know number of users\n    \n    return [<p>You are the first to join <i>{org.name}</i>, welcome!</p>,\n    <p>Since you are the first to join, you will have administrator rights to this account. You can add other user and distribute rights as you see fit</p>,\n    <p>{org.name} is added under the <Link to=\"/pricing\">free subscription</Link> which is limited to up to 20 users and 10 apps. Go to <Link to=\"/account\">account administration</Link> to administer users and account information<br/><br/></p>\n    ]\n  }\n\n  personal(org){\n    return <p>This is your personal account. You can use this for testing</p>\n  }\n  guest(org){\n    return <p>You are are invited as a member of this account</p>\n  }\n\n  newApp(item, i){\n    return (\n      <Form>\n      <Grid stackable style={{marginTop:'0px', marginLeft:'0px'}}>\n    <Grid.Row columns={3} >\n        <Grid.Column>\n        <Form.Field>\n        <Input text=\"Application name\"\n               value={item.name}\n              placeholder=\"App name\"\n              onChange={e => this.props.setOrgProperty(appReducer.CreateUpdate(['apps',i,'name', e.target.value]))} />\n      </Form.Field>\n    </Grid.Column>\n    <Grid.Column>\n    <Form.Field>\n      <Input  label={this.props.selectedOrg.uriKey+'-'} value={item.uriKey}\n             placeholder=\"uri\" text=\"App URI\"\n             onChange={e => this.props.setOrgProperty(appReducer.CreateUpdate(['apps',i,'uriKey', e.target.value]))} />\n      \n    </Form.Field>\n    </Grid.Column>\n    <Grid.Column>\n      <Form.Field>\n        <div style={{marginTop:'40px'}}></div>\n        <Button loading={item.saving} onClick={() => this.saveApp(item, i)} icon=\"save\" text=\"Save\"/>\n        <Button onClick={()=>this.props.setOrgProperty(appReducer.CreateRemove(['apps',i]))} icon=\"cancel\" text=\"Cancel\"/>  \n        </Form.Field>\n       </Grid.Column>\n    </Grid.Row>\n    </Grid>\n    </Form>\n     \n   \n    )\n  }\n\n  oldApp(item,i){\n    return (\n      <AppNavButton to={'/app/'+item.uriKey} selectedOrg={this.props.selectedOrg} appInfo={item}/>\n      \n    )\n  }\n  apps(){\n    return (<div>\n      <Header>Apps</Header>\n      <Button icon=\"plus\" text=\"Add app\" onClick={()=>this.props.setOrgProperty(appReducer.CreateAdd(['apps',{name:'New app',newApp:true}]))}/>\n      <Grid style={{marginTop:'16px', marginLeft:'0px'}}>\n        {this.props.apps.map((item, i)=>(\n            item.newApp ? (<Grid.Row column={1}>\n                              <Grid.Column>{this.newApp(item,i)}</Grid.Column>\n                            </Grid.Row>):null\n         ))}\n     \n        <Grid.Row columns={8}>\n          {this.props.apps.map((item, i)=>(\n            !item.newApp ?<Grid.Column>{this.oldApp(item,i)}</Grid.Column>:null\n          ))}\n        </Grid.Row>\n      </Grid>\n\n      \n      \n      \n      \n    </div>)\n  }\n  loadGroups(){\n    \n    this.setState({loadingGroups:true}, async ()=>\n    {\n    try\n    {\n          {\n            let groups = await api.getOrgGroups(this.props.selectedOrg.uriKey)\n      \n          if (groups.error){ \n              console.log('group error:: ', groups.error);\n          }\n          else{\n            this.props.setOrgProperty(appReducer.CreateUpdate(['groups',groups]));\n          }\n        }\n    }\n    finally{\n      this.setState({loadingGroups:false});\n    }\n  }\n  );\n    \n}\n\n async saveGroup(group, index){\n        this.props.setOrgProperty(appReducer.CreateUpdate(['groups', index, 'saving', true]));\n        let saved = await api.saveOrgGroup(this.props.selectedOrg.uriKey, group);\n        if (saved.error) {\n          this.props.setOrgProperty(appReducer.CreateUpdate(['groups', index, 'saving', false], ['groups', index, 'error', saved.error]));\n        }\n        else {\n          this.props.setOrgProperty(appReducer.CreateUpdate(['groups', index, saved]));\n        }\n }\n\n async deleteGroup(group, index){\n   if (group.isNew){\n      this.props.setOrgProperty(appReducer.CreateRemove(['groups', index]));\n   }\n   else{\n      this.props.setOrgProperty(appReducer.CreateUpdate(['groups', index, 'saving', true]));\n      let saved = await api.deleteOrgGroup(this.props.selectedOrg.uriKey, group);\n      if (saved.error) {\n        this.props.setOrgProperty(appReducer.CreateUpdate(['groups', index, 'saving', false], ['groups', index, 'error', saved.error]));\n      }\n      else  {\n        this.props.setOrgProperty(appReducer.CreateRemove(['groups', index]));\n      }\n  }\n }\n\n cancelEditGroup(group, index){\n  if (group.new) {\n    let newStateUpdate = appReducer.CreateRemove(['groups', index]);\n    this.props.setOrgProperty(newStateUpdate);\n    \n}\nelse {\n    let newStateUpdate = appReducer.CreateUpdate(['groups', index, { ...group.original }]);\n    this.props.setOrgProperty(newStateUpdate);\n}\n }\n\n editGroup(group, index){\n  let newStateUpdate = appReducer.CreateUpdate(['groups', index, 'edit', true], ['groups', index, 'original', { ...group }]);\n  this.props.setOrgProperty(newStateUpdate);\n\n }\n\n \n showAddUserToGroup(group, index){\n    appReducer.CreateUpdate(['groups', index, 'showAddUser', true]);\n }\n async searchForUsers(filter){\n   let users = await api.getUsers(this.props.selectedOrg, null, filter);\n   return users;\n\n }\n renderAddUser(group, index){\n   return <Form>\n         <Input onChange={e => this.props.setOrgProperty(appReducer.CreateUpdate(['groups',index,'name', e.target.value]))} text=\"Group Name\" placeholder=\"Group name\" value={group.name}/>\n       \n   </Form>\n }\n\n  renderGroup(group, index){\n    return (<Form>\n    <Grid stackable style={{marginTop:'0px', marginLeft:'0px'}}>\n  <Grid.Row columns={2} >\n      <Grid.Column>\n      {group.edit?(\n         <Form.Field>\n           <Input onChange={e => this.props.setOrgProperty(appReducer.CreateUpdate(['groups',index,'name', e.target.value]))} text=\"Group Name\" placeholder=\"Group name\" value={group.name}/>\n           <Button loading={group.saving} onClick={() => this.showAddUserToGroup(group, index)} text=\"Add user(s) to group\" icon=\"plus\"/>\n\n         </Form.Field>\n      ):(\n        <Form.Field>\n          <span className={'ui input'} style={{paddingTop:'32px'}}>{group.name + ((group.userCount === undefined) ? null:` (${group.userCount} users)`)}</span>\n          \n        </Form.Field>\n      )\n      }\n    \n  </Grid.Column>\n  <Grid.Column>\n    <Form.Field>\n      <div style={{marginTop:'40px'}}></div>\n      {group.edit ?(\n      <div>\n      <Button  loading={group.saving} onClick={() => this.saveGroup(group, index)} text=\"Save\" icon=\"save\"/>\n      <Button loading={group.saving}  onClick={()=>this.cancelEditGroup(group, index)} text=\"Cancel\" icon=\"cancel\"/>\n      </div>\n      ):(\n        <div>\n          <Button loading={group.saving} onClick={() => this.editGroup(group, index)} text=\"Edit\" icon=\"edit\"/>\n          <Button loading={group.saving}  onClick={()=>this.deleteGroup(group, index)} text=\"Delete\" icon=\"remove\"/>\n        </div>\n          \n      )}\n      </Form.Field>\n     </Grid.Column>\n  </Grid.Row>\n  </Grid>\n  </Form>)\n   \n \n  }\n \n  renderGroups(){\n   return this.props.groups ?(\n      <div>\n      <Button icon=\"plus\" text=\"Add group\" onClick={()=>this.props.setOrgProperty(appReducer.CreateAdd(['groups',{name:'New group',isNew:true, edit:true}]))}/>\n      <Grid style={{marginTop:'16px', marginLeft:'0px'}}>\n        {this.props.groups.map((item, i)=>(\n             <Grid.Row column={1}>\n                              <Grid.Column>{this.renderGroup(item,i)}</Grid.Column>\n                            </Grid.Row>))\n         }\n      </Grid>\n       </div>\n     )\n     :<span>No groups:(</span>\n }\n\n  main(){\n    console.log('apps:',this.props.apps);\n   return [this.props.apps && this.props.apps.map ?this.apps() :null,\n    <div>\n    <h4>Groups</h4>\n     {this.state.loadingGroups ? <span>Loading...</span>:this.renderGroups()}\n\n     </div>\n\n  ]\n\n  }\n\n  render() {\n    return (\n      <div>\n        {(this.props.userOrgs.length > 0 && this.props.selectedOrg !== null) ?(\n          <div>\n            {[(!this.props.selectedOrg.enabled ? this.init(this.props.selectedOrg): \n            (this.props.selectedOrg.numberOfUsers === 1 && !this.props.selectedOrg.personal ? this.firstUser(this.props.selectedOrg) : null)),\n            ((this.props.selectedOrg.personal && this.props.selectedOrg.owner && this.props.selectedOrg.owner.key === this.props.user.key ? this.personal(this.props.selectedOrg) : null)),\n            ((this.props.selectedOrg.personal && this.props.selectedOrg.owner && this.props.selectedOrg.owner.key !== this.props.user.key ? this.personal(this.props.selectedOrg) : null)),\n            this.props.selectedOrg.enabled ? this.main():null]}\n          </div>\n        )\n          \n        :null}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  loginType : reducer.loginType(state),\n  user : reducer.user(state),\n  userOrgs: appReducer.userOrgs(state),\n  selectedOrg: appReducer.selectedOrg(state),\n  enablingOrg: appReducer.enablingOrg(state),\n  apps: appReducer.apps(state),\n  groups: appReducer.groups(state)\n  \n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  'setLoginType': (value) => dispatch(actions.setLoginType(value)),\n  'requestUserInfo': (value) => dispatch(actions.requestUserInfo()),\n  'enableOrg': (v) => dispatch(actions.enableOrg(v)),\n  'setProperty': (v) => dispatch(actions.setProperty(v)),\n  'setOrgProperty': (v) => dispatch(actions.setOrgProperty(v)),\n  'enableOrg':(v) => dispatch(actions.enableOrg(v)),\n  'saveApp':(v) => dispatch(actions.saveApp(v)),\n  'getApps':(v) => dispatch(actions.getApps(v)),\n  \n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Main);\n\n","import { connect } from 'react-redux';\r\nimport React, { Component } from 'react';\r\nimport logo from '../logo.svg';\r\nimport './App.css';\r\nimport * as api from '../services/api';\r\nimport config from '../config.json';\r\nimport * as actions from '../actions';\r\nimport * as reducer from '../reducers/Sec';\r\nimport * as appReducer from '../reducers/App';\r\n\r\nimport FileButton from './sub/FileButton';\r\nimport { Button, Segment, Grid, Radio, Header, Loader, Icon, Form, Label, Input, Divider } from 'semantic-ui-react';\r\nimport update from 'immutability-helper';\r\nimport Dropzone from 'react-dropzone';\r\nimport AppIcon from './sub/AppIcon';\r\nimport { Link, NavLink} from \"react-router-dom\";\r\n\r\n\r\n\r\n\r\nimport ReactIframeResizer from 'react-iframe-resizer-super';\r\nconst a = (props) => <a {...props}>{props.children}</a>\r\nconst iframeResizerOptions = { checkOrigin: false };\r\nclass Apps extends Component {\r\n    constructor(props, context) {\r\n        super(props, context);\r\n    \r\n        this.state = {\r\n        };\r\n    }\r\n\r\n   componentDidMount() {\r\n    if (!this.props.selectedOrg){\r\n      this.props.selectOrg({key:this.props.match.params.orgUriKey})\r\n    } \r\n  //  this.setState({appUriKey:this.props.match.params.appUriKey,loading:true},()=>this.loadApp());\r\n    //this.loadApp();\r\n\r\n    \r\n  }\r\n  async loadPolicy(){\r\n\r\n  }\r\n  async loadAppPage(){\r\n    let res = await api.getOrgAppPage(this.props.match.params.orgUriKey);\r\n    if (res.error){\r\n      console.log('error!', res.error);\r\n      let policy = await api.getOrgAuthPolicy(this.props.match.params.orgUriKey);\r\n      this.setState({policy:policy, notLoggedIn:res.error === \"NOAUTH\", error:res.error});\r\n    }\r\n    else{\r\n      this.props.setOrgProperty(appReducer.CreateUpdate(['appPage',res]));\r\n    }\r\n\r\n  }\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.selectedOrg && !this.props.appPage.org && !this.state.notLoggedIn){\r\n      this.loadAppPage();\r\n    }\r\n    \r\n    if (this.state.notLoggedIn && this.state.policy && this.state.policy.policy === \"own\"){\r\n    if (this.state.policy.provider === \"azure\") {\r\n      window.location.href = config.apiBase + \"/account/azure?redirect=\"+window.location.href;\r\n    }\r\n    else if (this.state.policy.provider === \"google\"){\r\n      window.location.href = config.apiBase + \"/account/google?redirect=\"+window.location.href;\r\n    }\r\n\r\n\r\n   // if (!this.state.loading && this.props.match.params.appUriKey !== prevProps.match.params.appUriKey){\r\n   //     this.setState({loading:true}, ()=> this.loadApp());\r\n   // }\r\n  }\r\n}\r\n\r\n  renderAll(appPage){\r\n    return (<div>\r\n      {this.renderOrg(appPage.org)}\r\n      {this.renderApps(appPage.org, appPage.apps)}\r\n    </div>)\r\n\r\n  }\r\n\r\n  renderOrg(org){\r\n    return <Header>{org.name}</Header>\r\n\r\n  }\r\n  renderApps(org, apps){\r\n    return ( <Grid doubling columns={5}>\r\n      {apps.map((a, index) => <Grid.Column>{this.renderApp(org, a, index)}</Grid.Column>)}\r\n    </Grid>)\r\n  }\r\n\r\n  renderApp(org, app, index){\r\n    return <Button basic style={{height:'64px', width:'64px', padding:0}} as={a} href={config.apiBase+'/app/'+org.uriKey+'/'+app.uriKey}>\r\n      <AppIcon selectedOrg={org} appInfo={app}></AppIcon>\r\n   </Button>\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n       \r\n       {this.props.appPage && this.props.appPage.org ? this.renderAll(this.props.appPage):null}\r\n       {this.state.notLoggedIn && this.state.policy ? (\r\n         <div>\r\n          {this.state.policy.policy === \"all\" ? (<div>\r\n              <Button basic color='black' href={config.apiBase + \"/account/azure?redirect=\"+window.location.href}>\r\n                <Icon>\r\n                  <svg style={{marginBottom:'-1px'}} xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 21 21\"><title>MS-SymbolLockup</title><rect x=\"1\" y=\"1\" width=\"9\" height=\"9\" fill=\"#f25022\"/><rect x=\"1\" y=\"11\" width=\"9\" height=\"9\" fill=\"#00a4ef\"/><rect x=\"11\" y=\"1\" width=\"9\" height=\"9\" fill=\"#7fba00\"/><rect x=\"11\" y=\"11\" width=\"9\" height=\"9\" fill=\"#ffb900\"/></svg>\r\n                </Icon>\r\n                  Sign in with Azure/Live\r\n                </Button>\r\n              <Button basic color='black' href={config.apiBase + \"/account/google?redirect=\"+window.location.href}> <Icon name='google plus' />Sign in with Google</Button>\r\n          </div>) : null}\r\n         </div>\r\n       ):null}\r\n      </div>\r\n      \r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  loginType : reducer.loginType(state),\r\n  user : reducer.user(state),\r\n  userOrgs: appReducer.userOrgs(state),\r\n  selectedOrg: appReducer.selectedOrg(state),\r\n  \r\n  enablingOrg: appReducer.enablingOrg(state),\r\n  apps: appReducer.apps(state),\r\n  appPage: appReducer.appPage(state),\r\n  \r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  'setLoginType': (value) => dispatch(actions.setLoginType(value)),\r\n  'setProperty': (v) => dispatch(actions.setProperty(v)),\r\n  'selectOrg': (v) => dispatch(actions.selectOrg(v)),\r\n  'setOrgProperty': (v) => dispatch(actions.setOrgProperty(v)),\r\n  'getApps':(v) => dispatch(actions.getApps(v)),\r\n  \r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Apps);\r\n\r\n","import { ToastContainer, toast } from 'react-toastify';\r\nimport * as actions from '../actions';\r\nimport React, { Component } from 'react';\r\n//import { Col, Grid, Row, Alert } from 'react-bootstrap';\r\nimport { Route, Redirect,Switch, withRouter } from \"react-router-dom\";\r\n//import NavMenu from './NavMenu';\r\nimport Header from './Header';\r\nimport * as appReducer from '../reducers/App';\r\nimport * as secReducer from '../reducers/Sec';\r\nimport  App  from \"./App\";\r\nimport  AppDef  from \"./AppDef\";\r\nimport  Pricing  from \"./Pricing\";\r\nimport  About  from \"./About\";\r\nimport  Main  from \"./Main\";\r\nimport  Apps  from \"./Apps\";\r\nimport { connect } from 'react-redux';  \r\nimport { Menu, Segment, Sticky, Grid, GridColumn, Header as H, Dropdown, Icon } from 'semantic-ui-react'\r\n\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\n\r\nclass Layout extends Component {\r\n    state = {\r\n      response: ''\r\n    };\r\n  \r\n    componentDidMount() {\r\n      console.log(\"init:\",this.props);\r\n      \r\n    \r\n    }\r\n  \r\n    componentWillUpdate(nextProps) {\r\n  \r\n      console.log(nextProps);\r\n  \r\n    }\r\n \r\n \r\n    \r\n    \r\n    render (){   \r\n      return (\r\n      \r\n      <Switch>\r\n                        <Route path='/:orgUriKey/apps' component={Apps} />\r\n                        <Route render={()=>  (\r\n      \r\n      \r\n                      \r\n      <Grid stackable >                          \r\n            <Grid.Row>\r\n              <Grid.Column>\r\n\r\n                 <Header/>\r\n              </Grid.Column>\r\n\r\n            </Grid.Row>\r\n        <Grid.Row className={'page'} columns={1}> \r\n        <Grid.Column>\r\n          <ToastContainer autoClose={15000} position={'top-center'} />\r\n           {(this.props.user && this.props.selectedOrg) ?(\r\n                    <div>\r\n                      <Switch>\r\n                        <Redirect path='/null' to=\"/\" />\r\n                        <Route path='/' component={Main} exact/>\r\n                      </Switch>\r\n                      <Route path='/pricing' component={Pricing} />\r\n                      <Route path='/about' component={About} />\r\n                      <Route path='/app/:appUriKey' component={AppDef} />\r\n                    </div>\r\n                  ):(\r\n                    <div>\r\n                      <Switch>\r\n                        <Redirect path='/null' to=\"/\" exact/>\r\n                        <Route path='/:stuff' component={App}/>\r\n                        <Route path='/' component={App} exact/>\r\n                      </Switch>\r\n                      <Route path='/pricing' component={Pricing} exact />\r\n                      <Route path='/about' component={About}  exact  />\r\n                    \r\n                    </div>\r\n                  )\r\n                  \r\n                }\r\n           </Grid.Column>\r\n        </Grid.Row>\r\n      </Grid>\r\n                        )\r\n                      }/>\r\n                      </Switch>\r\n\r\n                      \r\n    )\r\n    }\r\n\r\n\r\n}\r\nconst mapStateToProps = (state) => ({\r\n  errors :appReducer.errors(state),\r\n  user : secReducer.user(state),\r\n  selectedOrg: appReducer.selectedOrg(state),\r\n\r\n  });\r\n  \r\n  const mapDispatchToProps = (dispatch) => ({\r\n    'clearErrors': (value) => dispatch(actions.globalErrorsClear()),\r\n  });\r\n  \r\n  export default withRouter(connect(mapStateToProps, mapDispatchToProps)(Layout));\r\n","import { runWithAdal,withAdalLogin } from 'react-adal';\r\nimport { authContext, withAdalLoginApi, withGoogleLoginApi, getAdalToken,getGoogleToken,  logOutAdal, getCachedAdalUser, getCachedGoogleUser } from './adalConfig';\r\n\r\n\r\nimport { connect } from 'react-redux';\r\nimport React, { Component } from \"react\";\r\nimport { Route, Redirect, withRouter } from \"react-router-dom\";\r\nimport  Layout  from \"./components/Layout\";\r\nimport  App,{GoogleTokenApp, AdalTokenApp}  from \"./components/App\";\r\nimport * as actions from './actions';\r\nimport * as sec from './reducers/Sec';\r\nimport * as api from './services/api';\r\n/*import  FetchData  from \"./components/FetchData\";\r\nimport  Counter  from \"./components/Counter\";\r\nimport Archive from \"./components/Archive\";\r\nimport Projects from \"./components/Projects\";\r\nimport Locations from \"./components/Locations\";\r\n*/\r\n\r\n//const AzureApp = withAdalLoginApi()(Layout, ()=><b>Loading</b>, (error)=><b>Error {error}</b>);\r\n//const GoogleApp = withGoogleLoginApi(Layout, ()=><b>Loading</b>, (error)=><b>Error {error}</b>);\r\n//const getGoogleToken = () => gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token;\r\n\r\n/*const logOutGoogle = () =>{\r\n    var auth2 = window.gapi.auth2.getAuthInstance();\r\n    auth2.signOut().then(function () {\r\n      console.log('User signed out.'); \r\n    });\r\n};\r\n*/\r\nclass Routes extends Component {\r\n    state = {\r\n      response: ''\r\n    };\r\n\r\n   \r\n  \r\n    componentDidMount() {\r\n    }\r\n\r\n    componentWillUpdate(nextProps) {\r\n    }\r\n    \r\n    routes() {\r\n       return (<Layout/>)\r\n    }\r\n\r\n    render() {\r\n       return this.routes();\r\n        \r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => ({\r\n    //'mmtSystem': reducer.mmtSystem(state),\r\n    loginType : sec.loginType(state),\r\n    user: sec.user(state)\r\n \r\n  });\r\n  \r\n  const mapDispatchToProps = (dispatch) => ({\r\n   \r\n  \r\n   \r\n  });\r\n  \r\n  export default withRouter(connect(mapStateToProps, mapDispatchToProps)(Routes));\r\n/*\r\n  <Route path='/archive' component={Archive} />\r\n        <Route path='/projects' component={Projects} />\r\n        <Route path='/locations' component={Locations} />\r\n        <Route path='/fetchdata/:startDateIndex?' component={FetchData} />\r\n\r\n        */","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { ToastContainer, toast } from 'react-toastify';\r\nimport {\r\n    put,\r\n    call,\r\n    takeLatest,\r\n    all,\r\n    select\r\n} from 'redux-saga/effects';\r\nimport * as api from '../services/api';\r\nimport * as actions from '../actions';\r\nimport { push } from \"react-router-redux\";\r\n\r\nconst parameterIfSet = (p) => {\r\n    if (p && p.code) {\r\n        return p.code;\r\n    }\r\n    return null;\r\n}\r\nconst getState = (state) => {\r\n    return {user: state.sec.user, userOrgs: state.app.userOrgs, selectedOrg: state.app.selectedOrg};\r\n    /*\r\n    let request = [\r\n        { key: 'projectCode', value: parameterIfSet(mmt.archiveProject) },\r\n        { key: 'locationFromCode', value: parameterIfSet(mmt.archiveLocationFrom) },\r\n        { key: 'locationToCode', value: parameterIfSet(mmt.archiveLocationTo) },\r\n        { key: 'user', value: parameterIfSet(mmt.archiveUser) },\r\n        { key: 'systemCode', value: parameterIfSet(mmt.archiveSystem) },\r\n        { key: 'skip', value: ((mmt.archiveCurrentPage - 1) * 100) }\r\n    ];\r\n    return request;*/\r\n};\r\n\r\nfunction* signOut(action){\r\n    yield call(api.logOut);\r\n    yield put(actions.setSecReset()); // reset user\r\n    yield put(push('/'));\r\n}\r\n\r\nfunction* requestErrorHandling(failedRequest, actionToFire, payload) {\r\n    failedRequest = failedRequest || {error:\"...We don't know what went wrong:(\"}\r\n    try {\r\n      if (failedRequest.status == 400){\r\n        payload.message = failedRequest.response._bodyText;\r\n        if (actionToFire) { yield put(actionToFire(payload));}\r\n    \r\n      }\r\n      else if (failedRequest.status == 401){\r\n        push('/');\r\n      }\r\n    \r\n      else if (failedRequest.status == 403){\r\n        if (actionToFire) { yield put(actionToFire(payload));}\r\n    \r\n      }\r\n      else{\r\n        if (actionToFire) { yield put(actionToFire(failedRequest));}\r\n        yield* generalError(failedRequest, actionToFire, payload);\r\n      }\r\n    }\r\n      catch(e){\r\n        console.log(e);\r\n      }\r\n    }\r\n\r\nfunction isObject(val) {\r\n    if (val === null) { return false;}\r\n    return ( (typeof val === 'function') || (typeof val === 'object') );\r\n}\r\nfunction errorMessage(error){\r\n    let msg = error.message || error.error || error;\r\n    if (isObject(msg)){\r\n        return JSON.stringify(msg);\r\n    }\r\n    return msg;\r\n}    \r\nfunction* generalError(action){\r\n\r\n    try{\r\n        console.log(\"Error!\",action.payload)\r\n    \r\n        //  AppInsights.trackException(exception: action.payload);\r\n    \r\n        toast.error(errorMessage(action.payload || action));\r\n    \r\n      \r\n    \r\n    \r\n        // Toast or similar?\r\n    }\r\n    catch (e) {\r\n        console.log(e);\r\n    }\r\n    }\r\n        \r\nfunction* getUserInfo(action) {\r\n\r\n    try {\r\n\r\n        var res = yield call(api.getUserInfo);\r\n        if (res && !res.error){\r\n            yield put(actions.setLoginType(res.source));\r\n            yield put(actions.requestUserInfoSuccess(res));\r\n            let state = yield select(getState);\r\n            if (state.userOrgs.length === 0){\r\n                yield* getUserOrgs(action);\r\n            }\r\n        }\r\n        else {\r\n            let state = yield select(getState);\r\n            if (state.user){ // reset user if set\r\n                yield put(actions.requestUserInfoFailed());\r\n                yield put(push('/'));\r\n            }\r\n        }\r\n    } catch (ex) {\r\n\r\n        let user = yield select(getState);\r\n        if (user){\r\n            yield put(actions.requestUserInfoFailed());\r\n            yield put(push('/'));\r\n        }\r\n\r\n    }\r\n}\r\n\r\nfunction* saveApp(action){\r\n    try {\r\n        let state = yield select(getState);\r\n        if (!state.selectedOrg || !state.selectedOrg.uriKey) return;\r\n\r\n        var res = yield call(() => api.saveApp(state.selectedOrg.uriKey, action.payload));\r\n        if (res && !res.error){\r\n            yield put(actions.saveAppOk(res));\r\n        }\r\n        else {\r\n            yield* requestErrorHandling(res, action.addAppFailed, action.payload);\r\n            }\r\n        \r\n    } catch (ex) {\r\n\r\n        console.log(\"ex\",ex);\r\n        yield* requestErrorHandling(ex, action.saveAppFailed, action.payload);\r\n\r\n    } \r\n}\r\n\r\nfunction* getApps(action){\r\n    try {\r\n        let state = yield select(getState);\r\n        console.log(\"state in getApps\",state);\r\n        if (!state.selectedOrg || !state.selectedOrg.uriKey) return;\r\n        var res = yield call(() => api.getApps(state.selectedOrg.uriKey));\r\n        if (res && !res.error){\r\n            yield put(actions.getAppsOk(res));\r\n        }\r\n        else {\r\n            yield* requestErrorHandling(res, actions.getAppsFailed, action.payload);\r\n            }\r\n        \r\n    } catch (ex) {\r\n\r\n        console.log(\"ex\",ex);\r\n        yield* requestErrorHandling(ex, actions.getAppsFailed, action.payload);\r\n\r\n    } \r\n}\r\n\r\nfunction* enableOrg(action) {\r\n\r\n    try {\r\n\r\n        var res = yield call(() => api.enableOrg(action.payload));\r\n        if (res && !res.error){\r\n            yield put(actions.enableOrgOk(res));\r\n        }\r\n        else {\r\n            yield* requestErrorHandling(res, null, action.payload);\r\n            }\r\n        \r\n    } catch (ex) {\r\n\r\n        console.log(\"ex\",ex);\r\n        yield* requestErrorHandling(ex, null, action.payload);\r\n\r\n    }\r\n\r\n}\r\n\r\nfunction* getUserOrgs(action) {\r\n\r\n    try {\r\n\r\n        var res = yield call(api.getUserOrgs);\r\n        if (res && !res.error){\r\n            yield put(actions.setUserOrgs(res));\r\n        }\r\n        else {\r\n            yield* requestErrorHandling(res, actions.setUserOrgsFailed, action.payload);\r\n            }\r\n        \r\n    } catch (ex) {\r\n\r\n        yield* requestErrorHandling(ex, actions.setUserOrgsFailed, action.payload);\r\n\r\n    }\r\n\r\n}\r\nconst root = function* rootSaga() {\r\n\r\n    yield all([\r\n        takeLatest(`${actions.requestUserInfo}`, getUserInfo),\r\n        takeLatest(`${actions.signOut}`, signOut),\r\n        takeLatest(`${actions.getUserOrgs}`, getUserOrgs),\r\n        takeLatest(`${actions.enableOrg}`, enableOrg),\r\n        takeLatest(`${actions.getApps}`, getApps),\r\n      //  takeLatest(`${actions.saveApp}`, saveApp),\r\n        \r\n    ]);\r\n\r\n};\r\n\r\nexport default root;\r\n","import { runWithAdal } from 'react-adal';\nimport { authContext } from './adalConfig';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap/dist/css/bootstrap-theme.css';\nimport './index.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Routes from './Routes';\nimport * as serviceWorker from './serviceWorker';\nimport 'babel-polyfill';\nimport 'matchmedia-polyfill';\nimport { Provider } from 'react-redux';\nimport { createBrowserHistory } from 'history';\nimport { ConnectedRouter } from 'react-router-redux';\nimport 'whatwg-fetch';\nimport 'semantic-ui-css/semantic.min.css'\n\n\nimport configureStore from './store/configureStore';\nconst baseUrl = document.getElementsByTagName('base')[0].getAttribute('href');\n\n\nconst history = createBrowserHistory({ basename: baseUrl });\n\n// Get the application-wide store instance, prepopulating with state from the server where available.\n//const initialState = window.initialReduxState;\nconst rootElement = document.getElementById('root');\nconst store = configureStore(history);\n\n\nfunction renderApp() {\n   \n    return ReactDOM.render(\n        <Provider store={store}>\n                  <ConnectedRouter history={history}>\n                    <Routes />\n                  </ConnectedRouter>\n        </Provider>,\n        rootElement);\n}\nrenderApp();\n\nif (module.hot) {\n  module.hot.accept(\"./Routes\", () => {\n    require(\"./Routes\");\n    renderApp();\n  });\n}\n\nconst loadClientWhenGapiReady = (script) => {\n  console.log('Trying To Load Client!');\n  console.log(script)\n  if(script.getAttribute('gapi_processed')){\n    console.log('Client is ready! Now you can access gapi. :)');\n   /* if(window.location.hostname==='localhost'){\n      window.gapi.client.load(\"http://localhost:8080/_ah/api/discovery/v1/apis/metafields/v1/rest\")\n      .then((response) => {\n        console.log(\"Connected to metafields API locally.\");\n        },\n        function (err) {\n          console.log(\"Error connecting to metafields API locally.\");\n        }\n      );\n    }*/\n  }\n  else{\n    console.log('Client wasn\\'t ready, trying again in 100ms');\n    setTimeout(() => {loadClientWhenGapiReady(script)}, 100);\n  }\n}\n\nconst initGapi = () => {\n  console.log('Initializing GAPI...');\n  console.log('Creating the google script tag...');\n\n  const script = document.createElement(\"script\");\n  script.onload = () => {\n    console.log('Loaded script, now loading our api...')\n    // Gapi isn't available immediately so we have to wait until it is to use gapi.\n    loadClientWhenGapiReady(script);\n  };\n  script.src = \"https://apis.google.com/js/platform.js?onload=init\";\n  \n  document.body.appendChild(script);\n}\n\ninitGapi();\n/*runWithAdal(authContext, () => {\n\n    // eslint-disable-next-line\n    return renderApp();\n  \n  },true);\n\nif (module.hot) {\n    module.hot.accept(\"./Routes\", () => {\n      require(\"./Routes\");\n      renderApp();\n    });\n  }\n/*\nimport { runWithAdal } from 'react-adal';\nimport { authContext } from './adalConfig';\nimport \n\nconst DO_NOT_LOGIN = true;\n\nrunWithAdal(authContext, () => {\n\n  // eslint-disable-next-line\n  require('./indexApp.js');\n\n},DO_NOT_LOGIN);\n\n*/\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();","import { applyMiddleware, combineReducers, compose, createStore } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { routerReducer, routerMiddleware } from 'react-router-redux';\r\nimport * as App from '../reducers/App';\r\nimport * as Sec from '../reducers/Sec';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport sagas  from '../sagas/index.js';\r\nimport { save, load } from \"redux-localstorage-simple\"\r\n\r\nfunction logger({ getState }) {\r\n  return (next) => (action) => {\r\n    console.log('dispatch:', action)\r\n \r\n  }\r\n}\r\nexport default function configureStore(history) {\r\n  const reducers = {\r\n      app: App.reducer,\r\n      sec: Sec.reducer\r\n    };\r\n    const sageMiddleware = createSagaMiddleware();\r\n  //const sagaMiddleware = applyMiddleware(sagaMiddleware);\r\n  const middleware = [\r\n    thunk,\r\n     routerMiddleware(history),\r\n      sageMiddleware,\r\n     // logger\r\n  ];\r\n\r\n  // In development, use the browser's Redux dev tools extension if installed\r\n  const enhancers = [];\r\n  const isDevelopment = process.env.NODE_ENV === 'development';\r\n  if (isDevelopment && typeof window !== 'undefined' && window.devToolsExtension) {\r\n    enhancers.push(window.devToolsExtension());\r\n  }\r\n  \r\n  const rootReducer = combineReducers({\r\n    ...reducers,\r\n      routing: routerReducer\r\n     \r\n  });\r\n  \r\n  const createStoreWithMiddleware \r\n  = applyMiddleware(\r\n      save({ states: [\"sec\"], namespace: \"apps\" }) // Saving done here\r\n  )(createStore)\r\n\r\n\r\n    let store = createStoreWithMiddleware(\r\n    rootReducer,\r\n    load({ states: [\"sec\"], namespace: \"apps\" }),  \r\n       \r\n    compose(applyMiddleware(...middleware), ...enhancers),\r\n    \r\n    );\r\n\r\n    sageMiddleware.run(sagas);\r\n\r\n    return store;\r\n \r\n}\r\n"],"sourceRoot":""}