(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{175:function(e,t,n){},248:function(e,t,n){e.exports=n(533)},322:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},323:function(e,t,n){},533:function(e,t,n){"use strict";n.r(t);var a=n(83),r=n(28),o=n(29),c=n(33),u=n(30),i=n(32),l=n(99),s=n(22),p=n.n(s),g=n(61),f=n(1),m=n.n(f);var h,d=function(){var e=Object(g.a)(p.a.mark(function e(t){var n,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.gapi.auth2.getAuthInstance(),a=n.currentUser.get(),console.log("signedIn:",a.getBasicProfile()),a){e.next=13;break}return e.next=6,n.signIn();case 6:if(r=e.sent,console.log("Google res:, ",r),!window.gapi.auth2.currentUser.get()){e.next=11;break}return e.abrupt("return",t());case 11:e.next=14;break;case 13:return e.abrupt("return",t());case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),b={tenant:"common",clientId:"9f256bb0-1a93-4247-9e1e-bbd05532e2ce",endpoints:{api:"9f256bb0-1a93-4247-9e1e-bbd05532e2ce"},cacheLocation:"localStorage",popUp:!0},j=new a.AuthenticationContext(b),v=function(e,t,n){return function(a){function s(e){var t;return Object(r.a)(this,s),(t=Object(c.a)(this,Object(u.a)(s).call(this,e))).checkGapi=function(){var e=window.gapi;if(!window.googleReady&&(!e||!e.auth2))return console.log("waiting for gapi"),e&&!e.auth2&&e.load("auth2",function(){window.googleReady=!0,window.gapi.auth2.init({ux_mode:"popup",client_id:"1008335591690-9mgv2poc3vpi0ke1fi7c5m1dl2sejjru.apps.googleusercontent.com",scope:"email openid"}),this.setState({auth:!0})}.bind(Object(l.a)(Object(l.a)(t)))),setTimeout(function(){t.checkGapi()},100),void t.setState({ready:!1});t.setState({logged:!0})},t.componentWillMount=function(){t.checkGapi()},t.state={logged:!1,error:null},t}return Object(i.a)(s,a),Object(o.a)(s,[{key:"render",value:function(){return this.state.logged?m.a.createElement(e,this.props):this.state.error?"function"===typeof n?n(this.state.error):null:"function"===typeof t?t():null}}]),s}(m.a.Component)},O=function(){return new Promise(function(e,t){d(function(){e(window.gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token)},function(e){return t(e)})})},E=function(){return Object(a.adalGetToken)(j,b.endpoints.api)},y=(n(253),n(255),n(175),n(46)),k=n.n(y),w=n(35),x=n(36),T=n(288),C=n(534),A=n(535),I=n(245),S=n(543),R=Object(S.a)("sec/azure"),U=Object(S.a)("sec/google"),G=Object(S.a)("sec/reset"),N=Object(S.a)("sec/user"),L=Object(S.a)("sec/googleFail"),W=Object(S.a)("test/requestTest"),z=Object(S.a)("test/requested"),B=Object(S.a)("test/recieved"),M=Object(S.a)("test/failed"),P=n(69),D=n(70),_=n(540),H=Object(_.a)((h={},Object(P.a)(h,R,function(e,t){return Object(D.a)({},e,{loginType:"azure",loggedIn:!0})}),Object(P.a)(h,U,function(e,t){return Object(D.a)({},e,{loginType:"google",loggedIn:!1})}),Object(P.a)(h,N,function(e,t){return Object(D.a)({},e,{loggedIn:!0,user:t.payload})}),Object(P.a)(h,L,function(e,t){return Object(D.a)({},e,{loggedIn:!1,secError:t.payload})}),Object(P.a)(h,G,function(e,t){return Object(D.a)({},e,{loginType:"",loggedIn:!1,secError:null})}),h),{loggedIn:!1,loginType:null,user:null,token:null}),J=function(e){return e.sec},q=function(e){return J(e).loginType},F=function(e){return J(e).loggedIn},$={getToken:null,apiBase:"https://local-test.galapate.com:44346",scheme:null},K=function(){var e=Object(g.a)(p.a.mark(function e(t,n,a){var r,o,c,u;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,a){e.next=5;break}return e.next=4,$.getToken();case 4:r=e.sent;case 5:for(o="",n=n||[],$.scheme&&n.push({key:$.scheme,value:""}),n.length>0&&(o="?"),c=!0,u=0;u<n.length;u++)null!==n[u].value&&(u>0&&!c&&(o+="&"),c=!1,o+=n[u].key+"="+encodeURIComponent(n[u].value));return e.abrupt("return",fetch("".concat($.apiBase).concat(t).concat(o),{method:"GET",headers:{Authorization:a?null:"Bearer "+r,"Content-Type":"application/json; charset=utf-8d"}}).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return{error:e}}));case 12:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}(),Q=function(e){return K("/api/v1/user/info",e)},V=function(e){return K("/api/v1/user/info",e)},X=function(){return $.getToken?$.getToken():function(){return console.log("No get token method set")}},Y=function(e,t,n){$.getToken=e,$.scheme=t,$.logOut=n},Z=n(542),ee=n(536),te=n(537),ne=n(541),ae=n(538),re=n(539),oe=n(133),ce=(f.Component,function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return m.a.createElement(Z.a,{fixedTop:!0,fluid:!0,collapseOnSelect:!0},m.a.createElement(Z.a.Header,null,m.a.createElement(Z.a.Brand,null,m.a.createElement(C.a,null,m.a.createElement(A.a,{xs:5},"Logo"),m.a.createElement(A.a,{xs:7},m.a.createElement(x.Link,{className:"brand",to:"/"},"Name")))),m.a.createElement(Z.a.Toggle,null)),m.a.createElement(Z.a.Collapse,null,m.a.createElement(ee.a,null,m.a.createElement(oe.LinkContainer,{to:"/",exact:!0},m.a.createElement(te.a,null,"Home")),m.a.createElement(oe.LinkContainer,{to:"/pricing",exact:!0},m.a.createElement(te.a,null,"Pricing")),m.a.createElement(oe.LinkContainer,{to:"/about",exact:!0},m.a.createElement(te.a,null,"Why this service"))),m.a.createElement(ee.a,{pullRight:!0},m.a.createElement(ne.a,{id:"user-menu",noCaret:!0,title:this.props.user?m.a.createElement("div",{className:"user-info"},this.props.user.thumb?m.a.createElement("div",null," ",m.a.createElement("img",{style:{height:"35px",paddingRight:"10px"},srcSet:this.props.user.thumb})," ",this.props.user.name):m.a.createElement("div",null," ",m.a.createElement(ae.a,{style:{paddingRight:"10px"},pullright:"true",glyph:"user"})," ",this.props.user.name)):""},m.a.createElement(re.a,{onClick:function(){return $.logOut()}},"Sign out")))))}}]),t}(f.Component)),ue=Object(x.withRouter)(Object(w.b)(function(e){return{user:function(e){return J(e).user}(e),loggedIn:F(e)}},function(e){return{}})(ce)),ie=(n(322),n(323),n(325),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={response:""},n.callApi=Object(g.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:return t=e.sent,console.log(t),e.next=6,V();case 6:n=e.sent,console.log(n);case 8:case"end":return e.stop()}},e,this)})),n.test=function(){return fetch("https://store.galapate.com/api/values",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json; charset=utf-8d"}}).then(function(e){return e.json()}).then(function(e){console.log(e)}).catch(function(e){console.log({error:e})})},n.responseGoogle=function(e){n.props.setSecGoogle(e);var t=e.code;t&&n.getUserInfo(t),console.log(e)},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){console.log("init:",this.props)}},{key:"componentWillUpdate",value:function(e){console.log(e)}},{key:"getUserInfo",value:function(){var e=Object(g.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K("/api/v1/user/google-code",[{key:"code",value:t}],!0);case 2:(n=e.sent).error?console.log(n.error):this.props.setSecGoogleSuccess(n);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return m.a.createElement("div",{className:"App"},m.a.createElement("header",{className:"App-header"},m.a.createElement("h2",null,this.props.loginType),this.props.getToken?null:m.a.createElement("div",null,m.a.createElement("button",{onClick:function(){return d(function(){return e.props.setSecGoogle()})}},"Google"),m.a.createElement("div",{className:"g-signin2","data-onsuccess":"onSignIn"},"Hellu"),m.a.createElement("button",{onClick:function(){return e.props.setSecAzure()}},"Azure"),m.a.createElement("button",{onClick:function(){return e.callApi()}},"Test"),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("a",{href:"https://store.galapate.com/account/google"},"Actual google"),m.a.createElement("button",{onClick:function(){return e.test()}},"Test2")),m.a.createElement("p",{className:"App-intro"},this.state.response),m.a.createElement("p",null,"Edit ",m.a.createElement("code",null,"src/App.js")," and save to reloaddd."),m.a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"Learn React Just in app")))}}]),t}(f.Component)),le=Object(w.b)(function(e){return{loginType:q(e),loggedIn:F(e),secError:function(e){return J(e).secError}(e),token:function(e){return J(e).token}(e)}},function(e){return{setSecAzure:function(t){return e(R(t))},setSecGoogle:function(t){return e(U(t))},setSecReset:function(t){return e(G(t))}}})(ie),se=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={response:""},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUpdate",value:function(e){}},{key:"render",value:function(){return m.a.createElement("div",null,m.a.createElement("h1",null,"Pricing"))}}]),t}(f.Component),pe=Object(w.b)(function(e){return{}},function(e){return{}})(se),ge=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={response:""},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUpdate",value:function(e){}},{key:"render",value:function(){return m.a.createElement("div",null,m.a.createElement("h1",null,"About"))}}]),t}(f.Component),fe=Object(w.b)(function(e){return{}},function(e){return{}})(ge),me=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={response:""},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){console.log("init:",this.props)}},{key:"componentWillUpdate",value:function(e){console.log(e)}},{key:"render",value:function(){return m.a.createElement(T.a,{fluid:!0},m.a.createElement(C.a,null,m.a.createElement(A.a,{sm:12},m.a.createElement(ue,null))),m.a.createElement(C.a,null,m.a.createElement(A.a,{sm:12,className:"page"},m.a.createElement(x.Switch,null,m.a.createElement(x.Redirect,{path:"/null",to:"/"}),m.a.createElement(x.Route,{path:"/",component:le,exact:!0})),m.a.createElement(x.Route,{path:"/pricing",component:pe}),m.a.createElement(x.Route,{path:"/about",component:fe}))))}}]),t}(f.Component),he=Object(x.withRouter)(Object(w.b)(function(e){return{}},function(e){return{}})(me)),de=(j.handleWindowCallback(),Object(a.withAdalLogin)(j,b.endpoints.api))(he,function(){return m.a.createElement("b",null,"Loading")},function(e){return m.a.createElement("b",null,"Error ",e)}),be=v(he,function(){return m.a.createElement("b",null,"Loading")},function(e){return m.a.createElement("b",null,"Error ",e)}),je=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={response:""},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"setGoogle",value:function(){var e=Object(g.a)(p.a.mark(function e(t){var n,a=this;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.googleReady){e.next=3;break}return setTimeout(function(){a.setGoogle(t)},100),e.abrupt("return");case 3:return n=null,e.prev=4,e.next=7,d(function(){return window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile()});case 7:n=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),t.setSecReset(),e.abrupt("return");case 14:console.log(n),Y(function(){return O()},"g",function(){window.gapi.auth2.getAuthInstance().signOut().then(function(){console.log("User signed out.")})}),n&&n.profile&&t.setUser({email:n.userName,name:n.profile.name,thumb:n.profile.picture});case 17:case"end":return e.stop()}},e,this,[[4,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"setSec",value:function(e){if("azure"==e.loginType){var t=j.getCachedUser();E(),Y(function(){return E()},"a",function(){return j.logOut()}),t&&t.profile&&e.setUser({email:t.userName,name:t.profile.name})}else"google"==e.loginType&&this.setGoogle(e)}},{key:"componentDidMount",value:function(){this.setSec(this.props)}},{key:"componentWillUpdate",value:function(e){this.setSec(e),console.log("nextProps",e)}},{key:"routes",value:function(){switch(this.props.loginType){case"azure":return m.a.createElement(de,null);case"google":return m.a.createElement(be,null);default:return m.a.createElement(he,null)}}},{key:"render",value:function(){return this.routes()}}]),t}(f.Component),ve=Object(x.withRouter)(Object(w.b)(function(e){return{loginType:q(e)}},function(e){return{setUser:function(t){return e(N(t))},setSecReset:function(t){return e(G(t))}}})(je));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(326),n(528);var Oe=n(41),Ee=n(101),ye=(n(529),n(71)),ke=n(243),we=Object(_.a)({},{test:""}),xe=n(244),Te=n(62),Ce=p.a.mark(Ae);function Ae(e){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Te.c)(z());case 3:return e.next=5,Object(Te.b)(Q);case 5:return t=e.sent,e.next=8,Object(Te.c)(B(t));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(Te.c)(M(e.t0));case 14:case"end":return e.stop()}},Ce,this,[[0,10]])}var Ie=p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.a)([Object(Te.d)("".concat(W),Ae)]);case 2:case"end":return e.stop()}},e,this)}),Se=n(172);var Re=document.getElementsByTagName("base")[0].getAttribute("href"),Ue=Object(Oe.a)({basename:Re}),Ge=document.getElementById("root"),Ne=function(e){var t={app:we,sec:H},n=Object(xe.a)(),a=[ke.a,Object(Ee.b)(e),n],r=[],o=Object(ye.c)(Object(D.a)({},t,{routing:Ee.c})),c=Object(ye.a)(Object(Se.save)({states:["sec"],namespace:"apps"}))(ye.e)(o,Object(Se.load)({states:["sec"],namespace:"apps"}),ye.d.apply(void 0,[ye.a.apply(void 0,a)].concat(r)));return n.run(Ie),c}(Ue);k.a.render(m.a.createElement(w.a,{store:Ne},m.a.createElement(Ee.a,{history:Ue},m.a.createElement(ve,null))),Ge);!function(){console.log("Initializing GAPI..."),console.log("Creating the google script tag...");var e=document.createElement("script");e.onload=function(){console.log("Loaded script, now loading our api..."),function e(t){console.log("Trying To Load Client!"),console.log(t),t.getAttribute("gapi_processed")?console.log("Client is ready! Now you can access gapi. :)"):(console.log("Client wasn't ready, trying again in 100ms"),setTimeout(function(){e(t)},100))}(e)},e.src="https://apis.google.com/js/platform.js?onload=init",document.body.appendChild(e)}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[248,2,1]]]);
//# sourceMappingURL=main.114e1a21.chunk.js.map